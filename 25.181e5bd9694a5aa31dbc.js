(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{M0qH:function(e,t,n){"use strict";n.r(t),n.d(t,"RegisterPageModule",(function(){return y}));var o=n("Valr"),r=n("QJY3"),i=n("DUip"),c=n("c7TG"),a=n("lGQG"),s=n("TYT/"),u=n("Mm/0"),l=function(e,t,n,o){return new(n||(n=Promise))((function(r,i){function c(e){try{s(o.next(e))}catch(t){i(t)}}function a(e){try{s(o.throw(e))}catch(t){i(t)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(c,a)}s((o=o.apply(e,t||[])).next())}))},p=function(e,t){var n,o,r,i,c={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,o=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!((r=(r=c.trys).length>0&&r[r.length-1])||6!==i[0]&&2!==i[0])){c=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){c.label=i[1];break}if(6===i[0]&&c.label<r[1]){c.label=r[1],r=i;break}if(r&&c.label<r[2]){c.label=r[2],c.ops.push(i);break}r[2]&&c.ops.pop(),c.trys.pop();continue}i=t.call(e,c)}catch(a){i=[6,a],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}};function h(e,t){if(1&e){var n=s.ec();s.dc(0,"form",4),s.lc("ngSubmit",(function(){return s.Dc(n),s.pc().signUpSubmit()})),s.dc(1,"ion-grid"),s.dc(2,"ion-item"),s.dc(3,"ion-label",5),s.Kc(4,"Email"),s.cc(),s.Zb(5,"ion-input",6),s.cc(),s.dc(6,"ion-item"),s.dc(7,"ion-label",5),s.Kc(8,"Username"),s.cc(),s.Zb(9,"ion-input",7),s.cc(),s.dc(10,"ion-item"),s.dc(11,"ion-label",5),s.Kc(12,"Forename"),s.cc(),s.Zb(13,"ion-input",8),s.cc(),s.dc(14,"ion-item"),s.dc(15,"ion-label",5),s.Kc(16,"Surname"),s.cc(),s.Zb(17,"ion-input",9),s.cc(),s.dc(18,"ion-item"),s.dc(19,"ion-label",5),s.Kc(20,"Password"),s.cc(),s.Zb(21,"ion-input",10),s.cc(),s.dc(22,"ion-item"),s.dc(23,"ion-label",5),s.Kc(24,"Confirm password"),s.cc(),s.Zb(25,"ion-input",11),s.cc(),s.dc(26,"ion-item",12),s.dc(27,"ion-label"),s.Kc(28,"Show password"),s.cc(),s.dc(29,"ion-checkbox",13),s.Kc(30,"Show password"),s.cc(),s.cc(),s.dc(31,"ion-button",14),s.Kc(32,"Submit"),s.cc(),s.cc(),s.cc()}if(2&e){var o=s.pc();s.vc("formGroup",o.singUpFormGroup),s.Mb(21),s.wc("type",null!=o.singUpFormGroup&&null!=o.singUpFormGroup.value&&o.singUpFormGroup.value.showPassword?"text":"password"),s.Mb(4),s.wc("type",null!=o.singUpFormGroup&&null!=o.singUpFormGroup.value&&o.singUpFormGroup.value.showPassword?"text":"password"),s.Mb(6),s.vc("disabled",!o.singUpFormGroup.valid)}}function d(e,t){if(1&e){var n=s.ec();s.dc(0,"form",4),s.lc("ngSubmit",(function(){return s.Dc(n),s.pc().verifySignUpSubmit()})),s.dc(1,"ion-grid"),s.dc(2,"ion-item"),s.dc(3,"ion-label",5),s.Kc(4,"Verification code"),s.cc(),s.Zb(5,"ion-input",15),s.cc(),s.dc(6,"ion-item"),s.dc(7,"ion-label",5),s.Kc(8,"Email or username"),s.cc(),s.Zb(9,"ion-input",16),s.cc(),s.dc(10,"ion-button",14),s.Kc(11,"Submit"),s.cc(),s.cc(),s.cc()}if(2&e){var o=s.pc();s.vc("formGroup",o.verifySignUpForm),s.Mb(10),s.vc("disabled",!o.verifySignUpForm.valid)}}function f(e,t){if(1&e){var n=s.ec();s.dc(0,"ion-item"),s.dc(1,"ion-button",17),s.lc("click",(function(){return s.Dc(n),s.pc().signupSubmitted=!0})),s.Kc(2,"I have a code ready"),s.cc(),s.cc()}}function m(e,t){if(1&e){var n=s.ec();s.dc(0,"ion-item"),s.dc(1,"ion-button",17),s.lc("click",(function(){return s.Dc(n),s.pc().signupSubmitted=!1})),s.Kc(2,"Try again"),s.cc(),s.cc()}}var g=function(){function e(e,t,n,o,i,c){this.alertCtrl=e,this.loadingCtrl=t,this.formBuilder=n,this.navController=o,this.toastCtrl=i,this.authService=c,this.signupSubmitted=!1,this.singUpFormGroup=this.formBuilder.group({username:["",r.o.compose([r.o.required])],forename:["",r.o.compose([r.o.required])],surname:["",r.o.compose([r.o.required])],email:["",r.o.compose([r.o.required,r.o.email])],password:["",r.o.compose([r.o.required,r.o.minLength(8)])],passwordConfirm:["",r.o.compose([r.o.required,r.o.minLength(8)])],showPassword:[!1]},{validator:this.matchingPasswords("password","passwordConfirm")}),this.verifySignUpForm=this.formBuilder.group({code:["",r.o.compose([r.o.required])],email:["",r.o.compose([r.o.required])]})}return e.prototype.ngOnInit=function(){},e.prototype.verifySignUpSubmit=function(){return l(this,void 0,void 0,(function(){var e,t;return p(this,(function(n){switch(n.label){case 0:return[4,this.loadingCtrl.create({message:"Verifying..."})];case 1:e=n.sent(),n.label=2;case 2:return n.trys.push([2,6,,8]),[4,e.present()];case 3:return n.sent(),[4,this.authService.confirmSignUp(this.verifySignUpForm.value.email,this.verifySignUpForm.value.code)];case 4:return n.sent(),this.navController.navigateRoot("login"),[4,e.dismiss()];case 5:return n.sent(),[3,8];case 6:return t=n.sent(),[4,e.dismiss()];case 7:return n.sent(),console.log(t),[3,8];case 8:return[2]}}))}))},e.prototype.presentToast=function(){return l(this,void 0,void 0,(function(){return p(this,(function(e){switch(e.label){case 0:return[4,this.toastCtrl.create({message:"Your account has been created, please verify your email address",duration:3e3,position:"top"})];case 1:return[4,e.sent().present()];case 2:return e.sent(),[2]}}))}))},e.prototype.matchingPasswords=function(e,t){return function(n){if(n.controls[e].value!==n.controls[t].value)return{mismatchedPasswords:!0}}},e.prototype.presentAlert=function(e){return l(this,void 0,void 0,(function(){return p(this,(function(t){switch(t.label){case 0:return[4,this.alertCtrl.create({header:"Error",subHeader:"Failed to create account",message:e,buttons:["OK"]})];case 1:return[4,t.sent().present()];case 2:return t.sent(),[2]}}))}))},e.prototype.signUpSubmit=function(){return l(this,void 0,void 0,(function(){var e,t;return p(this,(function(n){switch(n.label){case 0:return[4,this.loadingCtrl.create({message:"Registering..."})];case 1:e=n.sent(),n.label=2;case 2:return n.trys.push([2,6,,8]),[4,e.present()];case 3:return n.sent(),[4,this.authService.register(this.singUpFormGroup.value.username,this.singUpFormGroup.value.email,this.singUpFormGroup.value.forename,this.singUpFormGroup.value.surname,this.singUpFormGroup.value.password)];case 4:return n.sent(),this.navController.navigateRoot("login"),[4,e.dismiss()];case 5:return n.sent(),[3,8];case 6:return t=n.sent(),[4,e.dismiss()];case 7:return n.sent(),console.log(t),[3,8];case 8:return[2]}}))}))},e.\u0275fac=function(t){return new(t||e)(s.Yb(c.b),s.Yb(c.ab),s.Yb(r.b),s.Yb(c.db),s.Yb(c.kb),s.Yb(a.a))},e.\u0275cmp=s.Sb({type:e,selectors:[["register"]],decls:8,vars:4,consts:[["title","Sign up"],[1,"signup"],["class","ion-padding",3,"formGroup","ngSubmit",4,"ngIf"],[4,"ngIf"],[1,"ion-padding",3,"formGroup","ngSubmit"],["position","stacked"],["type","email","formControlName","email"],["type","text","formControlName","username"],["type","text","formControlName","forename"],["type","text","formControlName","surname"],["type","text","formControlName","password",3,"type"],["type","text","formControlName","passwordConfirm",3,"type"],["lines","none"],["slot","start","formControlName","showPassword"],["type","submit","primary","","block","",3,"disabled"],["type","text","formControlName","code"],["type","text","formControlName","email"],[3,"click"]],template:function(e,t){1&e&&(s.dc(0,"ion-header"),s.Zb(1,"app-topbar",0),s.cc(),s.dc(2,"ion-content",1),s.Jc(3,h,33,4,"form",2),s.Jc(4,d,12,2,"form",2),s.dc(5,"ion-grid"),s.Jc(6,f,3,0,"ion-item",3),s.Jc(7,m,3,0,"ion-item",3),s.cc(),s.cc()),2&e&&(s.Mb(3),s.vc("ngIf",!t.signupSubmitted),s.Mb(1),s.vc("ngIf",t.signupSubmitted),s.Mb(2),s.vc("ngIf",!t.signupSubmitted),s.Mb(1),s.vc("ngIf",t.signupSubmitted))},directives:[c.s,u.a,c.p,o.l,c.r,r.q,r.i,r.d,c.y,c.z,c.x,c.jb,r.h,r.c,c.n,c.c,c.j],styles:[""]}),e}(),b=n("j1ZV"),v=[{path:"",component:g}],y=function(){function e(){}return e.\u0275mod=s.Wb({type:e}),e.\u0275inj=s.Vb({factory:function(t){return new(t||e)},imports:[[o.c,r.e,r.m,c.Y,i.k.forChild(v),b.a]]}),e}()},"Mm/0":function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));var o=n("lGQG"),r=n("l3hs"),i=n("c7TG"),c=n("a/9d"),a=n("M2ZX"),s=n("nUpg"),u=n("TYT/"),l=n("DUip"),p=n("Valr"),h=n("QJY3"),d=["removeFocusInput"];function f(e,t){1&e&&u.Zb(0,"ion-back-button",11)}function m(e,t){1&e&&(u.dc(0,"span",12),u.Kc(1,"\ud83d\udd34"),u.cc())}var g=function(){function e(e,t,n,o,r,i,c,a,s,u,l){this.events=e,this.searchService=t,this.auth=n,this.camera=o,this.platform=r,this.nativeStorage=i,this.menuCtrl=c,this.router=a,this.navCtrl=s,this.toastController=u,this.webSocketNotificationService=l,this.isApp=!1,this.isSearchPage=!1,this.placeholder='try "table"',this.placeholders=["Search - it's all free!"],this.isApp=!this.platform.is("desktop")}return e.prototype.ngOnInit=function(){this.isSearchPage=!!this.isSamePage("/search"),this.randomPlaceHolder()},e.prototype.randomPlaceHolder=function(){var e=this.placeholders[Math.floor(Math.random()*this.placeholders.length)];this.placeholder=e},e.prototype.uploadImage=function(e){console.log("image chosen")},e.prototype.goToPost=function(){this.navCtrl.navigateForward("post")},e.prototype.openMainMenu=function(){this.menuCtrl.open("start")},e.prototype.goToIntroduction=function(){this.navCtrl.navigateForward("introduction")},e.prototype.search=function(e){e.target.blur(),this.isSamePage("search")||this.navCtrl.navigateForward("search"),e.target.value&&(this.searchService.refreshSearchResults(),this.searchService.searchPageSearchRequest.searchQuery=e.target.value,this.searchService.search(null,null))},e.prototype.isSamePage=function(e){return this.router.url===e&&(console.log("same page"),!0)},e.prototype.openNotifications=function(){this.auth&&this.auth.user?this.navCtrl.navigateForward("notifications"):this.goToLogin()},e.prototype.goToRegister=function(){this.navCtrl.navigateForward("register")},e.prototype.goToLogin=function(){this.navCtrl.navigateForward("login")},e.prototype.redirectToSearch=function(e){this.removeFocusInput.nativeElement.focus().this.navCtrl.navigateForward("search/true")},e.prototype.takePicture=function(e){return t=this,void 0,o=function(){var e,t,n;return function(e,t){var n,o,r,i,c={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,o=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!((r=(r=c.trys).length>0&&r[r.length-1])||6!==i[0]&&2!==i[0])){c=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){c.label=i[1];break}if(6===i[0]&&c.label<r[1]){c.label=r[1],r=i;break}if(r&&c.label<r[2]){c.label=r[2],c.ops.push(i);break}r[2]&&c.ops.pop(),c.trys.pop();continue}i=t.call(e,c)}catch(a){i=[6,a],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}}(this,(function(o){switch(o.label){case 0:if(!this.auth||!this.auth.user)return this.goToLogin(),[2];if(this.goToPost(),this.platform.is("desktop"))return this.goToPost(),[2];e={quality:50,destinationType:this.camera.DestinationType.DATA_URL,encodingType:this.camera.EncodingType.JPEG,mediaType:this.camera.MediaType.PICTURE,targetWidth:1280,targetHeight:1280,saveToPhotoAlbum:!1},o.label=1;case 1:return o.trys.push([1,3,,4]),[4,this.camera.getPicture(e)];case 2:return t=o.sent(),this.nativeStorage.setItem("latestPicture","data:image/jpeg;base64,"+t).then((function(){return console.log("Stored item!")}),(function(e){return console.error("Error storing item",e)})),this.navCtrl.navigateForward("post"),[3,4];case 3:return n=o.sent(),console.log(n),[3,4];case 4:return[2]}}))},new((n=void 0)||(n=Promise))((function(e,r){function i(e){try{a(o.next(e))}catch(t){r(t)}}function c(e){try{a(o.throw(e))}catch(t){r(t)}}function a(t){var o;t.done?e(t.value):(o=t.value,o instanceof n?o:new n((function(e){e(o)}))).then(i,c)}a((o=o.apply(t,[])).next())}));var t,n,o},e.prototype.placeHolderFocus=function(){this.placeholder="try 'table'"},e.prototype.placeHolderBlur=function(){this.placeholder="Search - it's all free!"},e.\u0275fac=function(t){return new(t||e)(u.Yb(i.d),u.Yb(r.a),u.Yb(o.a),u.Yb(c.a),u.Yb(i.eb),u.Yb(a.a),u.Yb(i.bb),u.Yb(l.i),u.Yb(i.db),u.Yb(i.kb),u.Yb(s.b))},e.\u0275cmp=u.Sb({type:e,selectors:[["app-topbar"]],viewQuery:function(e,t){var n;1&e&&u.Oc(d,!0),2&e&&u.Bc(n=u.mc())&&(t.removeFocusInput=n.first)},inputs:{title:"title",displaySearchBar:"displaySearchBar",displayCameraIcon:"displayCameraIcon"},decls:13,vars:9,consts:[[1,"ion-no-padding"],["slot","start","fill","clear",3,"click"],["name","menu",2,"font-size","2em"],["slot","start","color","primary","defaultHref","search",4,"ngIf"],["id","main-search-bar","autofocus","","slot","start",1,"searchbar",3,"searchIcon","ngModel","showCancelButton","clearIcon","placeholder","ngModelChange","search","ionFocus","ionBlur"],["searchInput",""],["type","hidden",2,"display","none"],["removeFocusInput",""],["slot","end","fill","clear",1,"ion-no-padding",3,"click"],[1,"ion-no-padding",3,"src"],["class","new-notification-position",4,"ngIf"],["slot","start","color","primary","defaultHref","search"],[1,"new-notification-position"]],template:function(e,t){1&e&&(u.dc(0,"ion-toolbar",0),u.dc(1,"ion-button",1),u.lc("click",(function(){return t.openMainMenu()})),u.Zb(2,"ion-icon",2),u.cc(),u.Jc(3,f,1,0,"ion-back-button",3),u.dc(4,"ion-searchbar",4,5),u.lc("ngModelChange",(function(e){return t.searchService.searchPageSearchRequest.searchQuery=e}))("search",(function(e){return t.search(e)}))("ionFocus",(function(){return t.placeHolderFocus()}))("ionBlur",(function(){return t.placeHolderBlur()})),u.cc(),u.Zb(6,"input",6,7),u.dc(8,"ion-button",8),u.lc("click",(function(e){return t.takePicture(e)})),u.Zb(9,"ion-icon",9),u.cc(),u.dc(10,"ion-button",8),u.lc("click",(function(){return t.openNotifications()})),u.Zb(11,"ion-icon",9),u.Jc(12,m,2,0,"span",10),u.cc(),u.cc()),2&e&&(u.Mb(3),u.vc("ngIf",!t.isSearchPage),u.Mb(1),u.vc("searchIcon","menu")("ngModel",t.searchService.searchPageSearchRequest.searchQuery)("showCancelButton",!1)("clearIcon","true")("placeholder",t.placeholder),u.Mb(5),u.vc("src","/assets/icon/menu/post-advert.svg"),u.Mb(2),u.vc("src","/assets/icon/menu/notification.svg"),u.Mb(1),u.vc("ngIf",t.webSocketNotificationService.newNotifictions))},directives:[i.X,i.j,i.t,p.l,i.L,i.jb,h.h,h.k,i.g,i.h],styles:[".title[_ngcontent-%COMP%]{color:var(--ion-color-primary);line-height:1em;font-size:.8em}.offline[_ngcontent-%COMP%]{background-color:var(--ion-color-danger);color:var(--ion-color-danger-contrast);text-transform:uppercase;text-align:center;font-size:.8em}.new-notification-position[_ngcontent-%COMP%]{position:absolute;right:1.5em;top:.5em;font-size:.7em}ion-searchbar[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{display:none!important}ion-icon.custom[_ngcontent-%COMP%]{font-size:2em;color:var(--ion-color-primary)!important;-webkit-filter:brightness(0) saturate(100%) invert(31%) sepia(30%) saturate(3312%) hue-rotate(131deg) brightness(99%) contrast(101%);filter:brightness(0) saturate(100%) invert(31%) sepia(30%) saturate(3312%) hue-rotate(131deg) brightness(99%) contrast(101%)}.searchbar-search-icon[_ngcontent-%COMP%]{display:none!important}"]}),e}()}}]);