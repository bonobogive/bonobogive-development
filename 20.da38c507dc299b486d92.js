(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{"+duN":function(t,e,n){"use strict";n.r(e),n.d(e,"InboxPageModule",(function(){return F}));var o=n("Valr"),i=n("QJY3"),c=n("DUip"),a=n("c7TG"),r=n("i5GC"),s=n("lGQG"),l=n("9vc0"),u=n("Xd5C"),h=n("TYT/"),f=n("Mm/0"),p=n("5j9j"),g=function(t,e,n,o){return new(n||(n=Promise))((function(i,c){function a(t){try{s(o.next(t))}catch(e){c(e)}}function r(t){try{s(o.throw(t))}catch(e){c(e)}}function s(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,r)}s((o=o.apply(t,e||[])).next())}))},d=function(t,e){var n,o,i,c,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return c={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(c[Symbol.iterator]=function(){return this}),c;function r(c){return function(r){return function(c){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(i=2&c[0]?o.return:c[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,c[1])).done)return i;switch(o=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return a.label++,{value:c[1],done:!1};case 5:a.label++,o=c[1],c=[0];continue;case 7:c=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==c[0]&&2!==c[0])){a=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){a.label=c[1];break}if(6===c[0]&&a.label<i[1]){a.label=i[1],i=c;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(c);break}i[2]&&a.ops.pop(),a.trys.pop();continue}c=e.call(t,a)}catch(r){c=[6,r],o=0}finally{n=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,r])}}};function v(t,e){1&t&&h.Zb(0,"div",5)}function m(t,e){if(1&t){var n=h.ec();h.dc(0,"ion-item",1),h.dc(1,"div"),h.dc(2,"app-message",2),h.lc("click",(function(){h.Dc(n);var t=h.pc();return t.openConversation(t.chat)})),h.cc(),h.cc(),h.dc(3,"div",3),h.Jc(4,v,1,0,"div",4),h.cc(),h.cc()}if(2&t){var o=h.pc();h.Mb(2),h.wc("subTitle",null==o.chat||null==o.chat.advert?null:o.chat.advert.title),h.wc("title",null==o.chat?null:o.chat.users[0].name),h.vc("square",!0)("imageUrl",o.advertImageUrl)("tinyTitle",null==o.chat||null==o.chat.chatDetails?null:o.chat.chatDetails.latestMessageDateTimeUtcCreated)("messageMultiLine",!1)("timestamp",null==o.chat||null==o.chat.chatDetails?null:o.chat.chatDetails.dateTimeUtcCreated)("focus",!0)("messageMultiLine",!0),h.Mb(2),h.vc("ngIf",!(null!=o.chat&&o.chat.seen))}}var b=function(){function t(t,e,n,o,i){this.auth=t,this.toast=e,this.alert=n,this.navController=o,this.chatClient=i,this.advertImageUrl="",this.loaded=!0}return t.prototype.showDeleteToast=function(){return g(this,void 0,void 0,(function(){return d(this,(function(t){switch(t.label){case 0:return[4,this.toast.create({message:"Conversation deleted",duration:2e3})];case 1:return t.sent().present(),[2]}}))}))},t.prototype.openConversation=function(t){t.seen=!0,this.navController.navigateForward("chat/"+t.chatDetails.primaryKey)},t.prototype.showDeleteConfirmation=function(t){return g(this,void 0,void 0,(function(){var e=this;return d(this,(function(n){switch(n.label){case 0:return[4,this.alert.create({header:"Delete conversation",message:"Are you sure you want to delete this conversation?",buttons:[{text:"Cancel",role:"cancel",cssClass:"secondary",handler:function(t){}},{text:"Delete",handler:function(){return g(e,void 0,void 0,(function(){return d(this,(function(e){switch(e.label){case 0:return[4,this.showDeleteToast()];case 1:return e.sent(),this.delete(t),[2]}}))}))}}]})];case 1:return[4,n.sent().present()];case 2:return n.sent(),[2]}}))}))},t.prototype.delete=function(t){this.chatClient.deleteChat(t.chatDetails.partitionKey,t.chatDetails.sortKey).subscribe((function(t){console.log("chat deleted",t)}))},t.prototype.ngOnInit=function(){},t.\u0275fac=function(e){return new(e||t)(h.Yb(s.a),h.Yb(a.kb),h.Yb(a.b),h.Yb(a.db),h.Yb(u.e))},t.\u0275cmp=h.Sb({type:t,selectors:[["app-chat-item"]],inputs:{chat:"chat",advert:"advert",user:"user"},decls:1,vars:1,consts:[["lines","none","class","chat-item","class","ion-no-padding",4,"ngIf"],["lines","none",1,"ion-no-padding"],[3,"subTitle","square","imageUrl","title","tinyTitle","messageMultiLine","timestamp","focus","click"],["slot","end"],["class","red-dot",4,"ngIf"],[1,"red-dot"]],template:function(t,e){1&t&&h.Jc(0,m,5,10,"ion-item",0),2&t&&h.vc("ngIf",e.loaded)},directives:[o.l,a.y,p.a],styles:[".chat-item[_ngcontent-%COMP%]   .chat-item-advert-image[_ngcontent-%COMP%]{position:relative;padding:0}.chat-item[_ngcontent-%COMP%]   .chat-item-advert-image[_ngcontent-%COMP%]   .advert-owner-photourl[_ngcontent-%COMP%]{position:absolute;bottom:2%;padding:0;left:0;right:0;margin:auto;width:40%;height:40%;border:1px solid #fff;border-radius:50%;-o-object-fit:cover;object-fit:cover}.chat-item[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.3em;color:#000}.chat-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:.9em}.chat-item[_ngcontent-%COMP%]   .red-dot[_ngcontent-%COMP%]{height:.5em;width:.5em;background-color:red;border-radius:50%;float:right}.chat-item[_ngcontent-%COMP%]   .delete-icon[_ngcontent-%COMP%]{font-size:2em}"]}),t}(),y=function(){function t(){}return t.prototype.transform=function(t,e){return t.map((function(t){return t.seen})).filter((function(t){return!0===t})).length},t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=h.Xb({name:"conversationsSeenCount",type:t,pure:!1}),t}();function M(t,e){1&t&&(h.dc(0,"div"),h.dc(1,"p"),h.Kc(2,"Please sign in"),h.cc(),h.cc())}function C(t,e){if(1&t&&(h.dc(0,"ion-badge",8),h.Kc(1),h.qc(2,"conversationsSeenCount"),h.cc()),2&t){var n=h.pc(2);h.Mb(1),h.Mc("",n.myConversations.length-h.rc(2,1,n.myConversations)," new")}}function w(t,e){if(1&t&&(h.dc(0,"ion-badge",8),h.Kc(1),h.qc(2,"conversationsSeenCount"),h.cc()),2&t){var n=h.pc(2);h.Mb(1),h.Mc("",n.theirConversations.length-h.rc(2,1,n.theirConversations)," new")}}function I(t,e){1&t&&h.Zb(0,"app-chat-item",10),2&t&&h.vc("chat",e.$implicit)}function P(t,e){if(1&t&&(h.dc(0,"ion-list"),h.Jc(1,I,1,1,"app-chat-item",9),h.cc()),2&t){var n=h.pc(3);h.Mb(1),h.vc("ngForOf",n.myConversations)}}function T(t,e){1&t&&(h.dc(0,"p"),h.Kc(1,"You have no messages for your own adverts"),h.cc())}function S(t,e){if(1&t&&(h.dc(0,"div"),h.Jc(1,P,2,1,"ion-list",2),h.Jc(2,T,2,0,"p",2),h.cc()),2&t){var n=h.pc(2);h.Mb(1),h.vc("ngIf",n.myConversations),h.Mb(1),h.vc("ngIf",n.myConversations.length<1)}}function O(t,e){1&t&&h.Zb(0,"app-chat-item",10),2&t&&h.vc("chat",e.$implicit)}function J(t,e){if(1&t&&(h.dc(0,"ion-list"),h.Jc(1,O,1,1,"app-chat-item",9),h.cc()),2&t){var n=h.pc(3);h.Mb(1),h.vc("ngForOf",n.theirConversations)}}function k(t,e){1&t&&(h.dc(0,"p"),h.Kc(1,"You have no messages for other adverts"),h.cc())}function _(t,e){if(1&t&&(h.dc(0,"div"),h.Jc(1,J,2,1,"ion-list",2),h.Jc(2,k,2,0,"p",2),h.cc()),2&t){var n=h.pc(2);h.Mb(1),h.vc("ngIf",n.theirConversations),h.Mb(1),h.vc("ngIf",n.theirConversations.length<1)}}function Y(t,e){if(1&t){var n=h.ec();h.dc(0,"div"),h.Zb(1,"ion-spinner",3),h.dc(2,"h2"),h.Kc(3,"Inbox"),h.cc(),h.dc(4,"ion-segment",4),h.lc("ngModelChange",(function(t){return h.Dc(n),h.pc().segmentOption=t})),h.dc(5,"ion-segment-button",5),h.Kc(6),h.qc(7,"conversationsSeenCount"),h.Jc(8,C,3,3,"ion-badge",6),h.qc(9,"conversationsSeenCount"),h.cc(),h.dc(10,"ion-segment-button",7),h.Kc(11),h.qc(12,"conversationsSeenCount"),h.Jc(13,w,3,3,"ion-badge",6),h.qc(14,"conversationsSeenCount"),h.cc(),h.cc(),h.Jc(15,S,3,2,"div",2),h.Jc(16,_,3,2,"div",2),h.cc()}if(2&t){var o=h.pc();h.Mb(1),h.vc("hidden",o.myConversations),h.Mb(3),h.vc("ngModel",o.segmentOption),h.Mb(2),h.Mc(" My adverts (",h.rc(7,8,o.myConversations),") "),h.Mb(2),h.vc("ngIf",h.rc(9,10,o.myConversations)<o.myConversations.length),h.Mb(3),h.Mc(" My requests (",h.rc(12,12,o.theirConversations),") "),h.Mb(2),h.vc("ngIf",h.rc(14,14,o.theirConversations)<o.theirConversations.length),h.Mb(2),h.vc("ngIf","owner"===o.segmentOption),h.Mb(1),h.vc("ngIf","guest"===o.segmentOption)}}var K=function(){function t(t,e,n,o,i,c){this.auth=t,this.errorService=e,this.navController=n,this.advertService=o,this.actionSheetCtrl=i,this.chatClient=c,this.title="Private Messages",this.messageSpinner=!1,this.myConversations=[],this.theirConversations=[],this.segmentOption="owner",this.lastEvaluatedKeyHash="",this.myAdvertsNewMessageCount=0,this.otherAdvertsNewMessageCount=0}return t.prototype.openUserProfile=function(t){console.log("opening profile user id: "+t),this.navController.navigateForward("UserProfile/"+t)},t.prototype.more=function(){this.getUserChats()},t.prototype.refresh=function(){this.lastEvaluatedKeyHash="",this.getUserChats()},t.prototype.ngOnInit=function(){this.getUserChats()},t.prototype.getUserChats=function(){var t=this,e=new u.r;e.take=100,e.nextRequestBlob=this.lastEvaluatedKeyHash,this.chatClient.getUserChats(this.auth.user.uid,e.take,e.nextRequestBlob).subscribe((function(e){console.log("chats",e),t.myConversations=e.entities.filter((function(e){return e.advert.userId===t.auth.user.uid})),t.theirConversations=e.entities.filter((function(e){return e.advert.userId!==t.auth.user.uid})),t.lastEvaluatedKeyHash=e.lastEvaluatedKeyHash}))},t.prototype.ngAfterViewInit=function(){console.log("all adverts")},t.\u0275fac=function(e){return new(e||t)(h.Yb(s.a),h.Yb(l.a),h.Yb(a.db),h.Yb(r.a),h.Yb(a.a),h.Yb(u.e))},t.\u0275cmp=h.Sb({type:t,selectors:[["inbox"]],decls:5,vars:2,consts:[["title","Private Messages"],[1,"messages"],[4,"ngIf"],["right","",1,"ion-padding",3,"hidden"],["color","secondary",3,"ngModel","ngModelChange"],["value","owner"],["color","danger",4,"ngIf"],["value","guest"],["color","danger"],[3,"chat",4,"ngFor","ngForOf"],[3,"chat"]],template:function(t,e){1&t&&(h.dc(0,"ion-header"),h.Zb(1,"app-topbar",0),h.cc(),h.dc(2,"ion-content",1),h.Jc(3,M,3,0,"div",2),h.Jc(4,Y,17,16,"div",2),h.cc()),2&t&&(h.Mb(3),h.vc("ngIf",!e.auth.user),h.Mb(1),h.vc("ngIf",e.auth.user))},directives:[a.s,f.a,a.p,o.l,a.S,a.M,a.ib,i.h,i.k,a.N,a.i,a.A,o.k,b],pipes:[y],styles:[""]}),t}(),U=n("j1ZV"),x=n("iTUp"),q=[{path:"",component:K}],F=function(){function t(){}return t.\u0275mod=h.Wb({type:t}),t.\u0275inj=h.Vb({factory:function(e){return new(e||t)},imports:[[o.c,i.e,i.m,a.Y,c.k.forChild(q),U.a,x.a]]}),t}()},"5j9j":function(t,e,n){"use strict";n.d(e,"a",(function(){return O}));var o=n("TYT/"),i=n("c7TG"),c=n("Valr");function a(t,e){if(1&t&&o.Zb(0,"ion-img",7),2&t){var n=o.pc(2);o.vc("src",n.imageUrl)}}function r(t,e){if(1&t&&o.Zb(0,"ion-icon",8),2&t){var n=o.pc(2);o.vc("name",n.iconName)("color",n.focus?"dark":"medium")}}function s(t,e){if(1&t&&(o.dc(0,"ion-avatar",4),o.Jc(1,a,1,1,"ion-img",5),o.Jc(2,r,1,2,"ion-icon",6),o.cc()),2&t){var n=o.pc();o.wc("slot",n.avatarSlot),o.Mb(1),o.vc("ngIf",n.imageUrl),o.Mb(1),o.vc("ngIf",n.iconName)}}function l(t,e){if(1&t&&o.Zb(0,"ion-img",7),2&t){var n=o.pc(2);o.vc("src",n.imageUrl)}}function u(t,e){if(1&t&&o.Zb(0,"ion-icon",8),2&t){var n=o.pc(2);o.vc("name",n.iconName)("color",n.focus?"dark":"medium")}}function h(t,e){if(1&t&&(o.dc(0,"ion-thumbnail",4),o.Jc(1,l,1,1,"ion-img",5),o.Jc(2,u,1,2,"ion-icon",6),o.cc()),2&t){var n=o.pc();o.wc("slot",n.avatarSlot),o.Mb(1),o.vc("ngIf",n.imageUrl),o.Mb(1),o.vc("ngIf",n.iconName)}}function f(t,e){if(1&t&&(o.dc(0,"ion-badge",13),o.Kc(1),o.cc()),2&t){var n=o.pc(3);o.Mb(1),o.Lc(n.badge)}}function p(t,e){if(1&t&&(o.dc(0,"h2",11),o.Jc(1,f,2,1,"ion-badge",12),o.Kc(2),o.cc()),2&t){var n=o.pc(2);o.Mb(1),o.vc("ngIf",n.badge),o.Mb(1),o.Mc(" ",n.title," ")}}function g(t,e){if(1&t&&(o.dc(0,"h3"),o.Kc(1),o.cc()),2&t){var n=o.pc(2);o.Mb(1),o.Lc(n.subTitle)}}function d(t,e){if(1&t&&(o.dc(0,"h4"),o.Kc(1),o.cc()),2&t){var n=o.pc(2);o.Mb(1),o.Lc(n.tinyTitle)}}function v(t,e){if(1&t&&(o.dc(0,"p"),o.Kc(1),o.cc()),2&t){var n=o.pc(2);o.Mb(1),o.Lc(n.message)}}function m(t,e){if(1&t&&(o.dc(0,"small"),o.Kc(1),o.qc(2,"date"),o.qc(3,"date"),o.cc()),2&t){var n=o.pc(2);o.Mb(1),o.Nc("",o.sc(2,2,n.dateTime,"shortTime")," ",o.sc(3,5,n.dateTime,"shortDate"),"")}}function b(t,e){if(1&t&&(o.dc(0,"ion-label",9),o.Jc(1,p,3,2,"h2",10),o.Jc(2,g,2,1,"h3",3),o.Jc(3,d,2,1,"h4",3),o.Jc(4,v,2,1,"p",3),o.Jc(5,m,4,8,"small",3),o.cc()),2&t){var n=o.pc();o.Mb(1),o.vc("ngIf",n.title),o.Mb(1),o.vc("ngIf",n.subTitle),o.Mb(1),o.vc("ngIf",n.tinyTitle),o.Mb(1),o.vc("ngIf",n.message),o.Mb(1),o.vc("ngIf",n.dateTime)}}function y(t,e){if(1&t&&(o.dc(0,"ion-badge",13),o.Kc(1),o.cc()),2&t){var n=o.pc(3);o.Mb(1),o.Lc(n.badge)}}function M(t,e){if(1&t&&(o.dc(0,"h2",11),o.Jc(1,y,2,1,"ion-badge",12),o.Kc(2),o.cc()),2&t){var n=o.pc(2);o.Mb(1),o.vc("ngIf",n.badge),o.Mb(1),o.Mc(" ",n.title," ")}}function C(t,e){if(1&t&&(o.dc(0,"h3"),o.Kc(1),o.cc()),2&t){var n=o.pc(2);o.Mb(1),o.Lc(n.subTitle)}}function w(t,e){if(1&t&&(o.dc(0,"h4"),o.Kc(1),o.cc()),2&t){var n=o.pc(2);o.Mb(1),o.Lc(n.tinyTitle)}}function I(t,e){if(1&t&&(o.dc(0,"p",15),o.Kc(1),o.cc()),2&t){var n=o.pc(2);o.Mb(1),o.Lc(n.message)}}function P(t,e){if(1&t&&(o.dc(0,"small"),o.Kc(1),o.qc(2,"date"),o.qc(3,"date"),o.cc()),2&t){var n=o.pc(2);o.Mb(1),o.Nc("",o.sc(2,2,n.dateTime,"shortTime")," ",o.sc(3,5,n.dateTime,"shortDate"),"")}}function T(t,e){if(1&t&&(o.dc(0,"ion-label"),o.Jc(1,M,3,2,"h2",10),o.Jc(2,C,2,1,"h3",3),o.Jc(3,w,2,1,"h4",3),o.Jc(4,I,2,1,"p",14),o.Jc(5,P,4,8,"small",3),o.cc()),2&t){var n=o.pc();o.Mb(1),o.vc("ngIf",n.title),o.Mb(1),o.vc("ngIf",n.subTitle),o.Mb(1),o.vc("ngIf",n.tinyTitle),o.Mb(1),o.vc("ngIf",n.message),o.Mb(1),o.vc("ngIf",n.dateTime)}}var S=function(t,e){return{reply:t,focus:e}},O=function(){function t(){this.imagePositionRight=!1,this.messageReply=!1,this.messageMultiLine=!1,this.square=!1,this.smallImage=!1,this.color=null,this.focus=!0,this.avatarSlot="start",this.replyPadding="",this.dateTime=new Date}return t.prototype.ngOnInit=function(){!0===this.imagePositionRight&&(this.avatarSlot="end"),this.dateTime=this.dateTimeInput},t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=o.Sb({type:t,selectors:[["app-message"]],inputs:{title:"title",subTitle:"subTitle",tinyTitle:"tinyTitle",message:"message",imageUrl:"imageUrl",iconName:"iconName",imagePositionRight:"imagePositionRight",messageReply:"messageReply",messageMultiLine:"messageMultiLine",dateTimeInput:"dateTimeInput",badge:"badge",square:"square",smallImage:"smallImage",color:"color",focus:"focus",timestamp:"timestamp"},decls:5,vars:8,consts:[["lines","none",1,"ion-text-wrap",3,"ngClass"],["size","small",3,"slot",4,"ngIf"],["class","ion-text-wrap",4,"ngIf"],[4,"ngIf"],["size","small",3,"slot"],[3,"src",4,"ngIf"],["style","font-size:2em",3,"name","color",4,"ngIf"],[3,"src"],[2,"font-size","2em",3,"name","color"],[1,"ion-text-wrap"],["slot","start",4,"ngIf"],["slot","start"],["slot","end",4,"ngIf"],["slot","end"],["style","text-overflow: ellipsis; white-space: nowrap;",4,"ngIf"],[2,"text-overflow","ellipsis","white-space","nowrap"]],template:function(t,e){1&t&&(o.dc(0,"ion-item",0),o.Jc(1,s,3,3,"ion-avatar",1),o.Jc(2,h,3,3,"ion-thumbnail",1),o.Jc(3,b,6,5,"ion-label",2),o.Jc(4,T,6,5,"ion-label",3),o.cc()),2&t&&(o.vc("ngClass",o.zc(5,S,e.messageReply,e.focus)),o.Mb(1),o.vc("ngIf",!e.square),o.Mb(1),o.vc("ngIf",e.square),o.Mb(1),o.vc("ngIf",e.messageMultiLine),o.Mb(1),o.vc("ngIf",!e.messageMultiLine))},directives:[i.y,c.j,c.l,i.f,i.u,i.t,i.U,i.z,i.i],pipes:[c.e],styles:[".reply[_ngcontent-%COMP%]{margin-left:2em}h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%], h4[_ngcontent-%COMP%], p[_ngcontent-%COMP%], small[_ngcontent-%COMP%]{padding:0;margin:0}h2[_ngcontent-%COMP%]{font-size:1em}h3[_ngcontent-%COMP%]{font-size:.9em}h4[_ngcontent-%COMP%]{font-size:.7em}small[_ngcontent-%COMP%]{font-size:.6em}p[_ngcontent-%COMP%]{font-size:1em}h2[_ngcontent-%COMP%]{font-weight:0}.focus[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], .focus[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], .focus[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-weight:700}"]}),t}()},"Mm/0":function(t,e,n){"use strict";n.d(e,"a",(function(){return v}));var o=n("lGQG"),i=n("l3hs"),c=n("c7TG"),a=n("a/9d"),r=n("M2ZX"),s=n("nUpg"),l=n("TYT/"),u=n("DUip"),h=n("Valr"),f=n("QJY3"),p=["removeFocusInput"];function g(t,e){1&t&&l.Zb(0,"ion-back-button",11)}function d(t,e){1&t&&(l.dc(0,"span",12),l.Kc(1,"\ud83d\udd34"),l.cc())}var v=function(){function t(t,e,n,o,i,c,a,r,s,l,u){this.events=t,this.searchService=e,this.auth=n,this.camera=o,this.platform=i,this.nativeStorage=c,this.menuCtrl=a,this.router=r,this.navCtrl=s,this.toastController=l,this.webSocketNotificationService=u,this.isApp=!1,this.isSearchPage=!1,this.placeholder='try "table"',this.placeholders=["Search - it's all free!"],this.isApp=!this.platform.is("desktop")}return t.prototype.ngOnInit=function(){this.isSearchPage=!!this.isSamePage("/search"),this.randomPlaceHolder()},t.prototype.randomPlaceHolder=function(){var t=this.placeholders[Math.floor(Math.random()*this.placeholders.length)];this.placeholder=t},t.prototype.uploadImage=function(t){console.log("image chosen")},t.prototype.goToPost=function(){this.navCtrl.navigateForward("post")},t.prototype.openMainMenu=function(){this.menuCtrl.open("start")},t.prototype.goToIntroduction=function(){this.navCtrl.navigateForward("introduction")},t.prototype.search=function(t){t.target.blur(),this.isSamePage("search")||this.navCtrl.navigateForward("search"),t.target.value&&(this.searchService.refreshSearchResults(),this.searchService.searchPageSearchRequest.searchQuery=t.target.value,this.searchService.search(null,null))},t.prototype.isSamePage=function(t){return this.router.url===t&&(console.log("same page"),!0)},t.prototype.openNotifications=function(){this.auth&&this.auth.user?this.navCtrl.navigateForward("notifications"):this.goToLogin()},t.prototype.goToRegister=function(){this.navCtrl.navigateForward("register")},t.prototype.goToLogin=function(){this.navCtrl.navigateForward("login")},t.prototype.redirectToSearch=function(t){this.removeFocusInput.nativeElement.focus().this.navCtrl.navigateForward("search/true")},t.prototype.takePicture=function(t){return e=this,void 0,o=function(){var t,e,n;return function(t,e){var n,o,i,c,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return c={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(c[Symbol.iterator]=function(){return this}),c;function r(c){return function(r){return function(c){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(i=2&c[0]?o.return:c[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,c[1])).done)return i;switch(o=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return a.label++,{value:c[1],done:!1};case 5:a.label++,o=c[1],c=[0];continue;case 7:c=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==c[0]&&2!==c[0])){a=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){a.label=c[1];break}if(6===c[0]&&a.label<i[1]){a.label=i[1],i=c;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(c);break}i[2]&&a.ops.pop(),a.trys.pop();continue}c=e.call(t,a)}catch(r){c=[6,r],o=0}finally{n=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,r])}}}(this,(function(o){switch(o.label){case 0:if(!this.auth||!this.auth.user)return this.goToLogin(),[2];if(this.goToPost(),this.platform.is("desktop"))return this.goToPost(),[2];t={quality:50,destinationType:this.camera.DestinationType.DATA_URL,encodingType:this.camera.EncodingType.JPEG,mediaType:this.camera.MediaType.PICTURE,targetWidth:1280,targetHeight:1280,saveToPhotoAlbum:!1},o.label=1;case 1:return o.trys.push([1,3,,4]),[4,this.camera.getPicture(t)];case 2:return e=o.sent(),this.nativeStorage.setItem("latestPicture","data:image/jpeg;base64,"+e).then((function(){return console.log("Stored item!")}),(function(t){return console.error("Error storing item",t)})),this.navCtrl.navigateForward("post"),[3,4];case 3:return n=o.sent(),console.log(n),[3,4];case 4:return[2]}}))},new((n=void 0)||(n=Promise))((function(t,i){function c(t){try{r(o.next(t))}catch(e){i(e)}}function a(t){try{r(o.throw(t))}catch(e){i(e)}}function r(e){var o;e.done?t(e.value):(o=e.value,o instanceof n?o:new n((function(t){t(o)}))).then(c,a)}r((o=o.apply(e,[])).next())}));var e,n,o},t.prototype.placeHolderFocus=function(){this.placeholder="try 'table'"},t.prototype.placeHolderBlur=function(){this.placeholder="Search - it's all free!"},t.\u0275fac=function(e){return new(e||t)(l.Yb(c.d),l.Yb(i.a),l.Yb(o.a),l.Yb(a.a),l.Yb(c.eb),l.Yb(r.a),l.Yb(c.bb),l.Yb(u.i),l.Yb(c.db),l.Yb(c.kb),l.Yb(s.b))},t.\u0275cmp=l.Sb({type:t,selectors:[["app-topbar"]],viewQuery:function(t,e){var n;1&t&&l.Oc(p,!0),2&t&&l.Bc(n=l.mc())&&(e.removeFocusInput=n.first)},inputs:{title:"title",displaySearchBar:"displaySearchBar",displayCameraIcon:"displayCameraIcon"},decls:13,vars:9,consts:[[1,"ion-no-padding"],["slot","start","fill","clear",3,"click"],["name","menu",2,"font-size","2em"],["slot","start","color","primary","defaultHref","search",4,"ngIf"],["id","main-search-bar","autofocus","","slot","start",1,"searchbar",3,"searchIcon","ngModel","showCancelButton","clearIcon","placeholder","ngModelChange","search","ionFocus","ionBlur"],["searchInput",""],["type","hidden",2,"display","none"],["removeFocusInput",""],["slot","end","fill","clear",1,"ion-no-padding",3,"click"],[1,"ion-no-padding",3,"src"],["class","new-notification-position",4,"ngIf"],["slot","start","color","primary","defaultHref","search"],[1,"new-notification-position"]],template:function(t,e){1&t&&(l.dc(0,"ion-toolbar",0),l.dc(1,"ion-button",1),l.lc("click",(function(){return e.openMainMenu()})),l.Zb(2,"ion-icon",2),l.cc(),l.Jc(3,g,1,0,"ion-back-button",3),l.dc(4,"ion-searchbar",4,5),l.lc("ngModelChange",(function(t){return e.searchService.searchPageSearchRequest.searchQuery=t}))("search",(function(t){return e.search(t)}))("ionFocus",(function(){return e.placeHolderFocus()}))("ionBlur",(function(){return e.placeHolderBlur()})),l.cc(),l.Zb(6,"input",6,7),l.dc(8,"ion-button",8),l.lc("click",(function(t){return e.takePicture(t)})),l.Zb(9,"ion-icon",9),l.cc(),l.dc(10,"ion-button",8),l.lc("click",(function(){return e.openNotifications()})),l.Zb(11,"ion-icon",9),l.Jc(12,d,2,0,"span",10),l.cc(),l.cc()),2&t&&(l.Mb(3),l.vc("ngIf",!e.isSearchPage),l.Mb(1),l.vc("searchIcon","menu")("ngModel",e.searchService.searchPageSearchRequest.searchQuery)("showCancelButton",!1)("clearIcon","true")("placeholder",e.placeholder),l.Mb(5),l.vc("src","/assets/icon/menu/post-advert.svg"),l.Mb(2),l.vc("src","/assets/icon/menu/notification.svg"),l.Mb(1),l.vc("ngIf",e.webSocketNotificationService.newNotifictions))},directives:[c.X,c.j,c.t,h.l,c.L,c.jb,f.h,f.k,c.g,c.h],styles:[".title[_ngcontent-%COMP%]{color:var(--ion-color-primary);line-height:1em;font-size:.8em}.offline[_ngcontent-%COMP%]{background-color:var(--ion-color-danger);color:var(--ion-color-danger-contrast);text-transform:uppercase;text-align:center;font-size:.8em}.new-notification-position[_ngcontent-%COMP%]{position:absolute;right:1.5em;top:.5em;font-size:.7em}ion-searchbar[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{display:none!important}ion-icon.custom[_ngcontent-%COMP%]{font-size:2em;color:var(--ion-color-primary)!important;-webkit-filter:brightness(0) saturate(100%) invert(31%) sepia(30%) saturate(3312%) hue-rotate(131deg) brightness(99%) contrast(101%);filter:brightness(0) saturate(100%) invert(31%) sepia(30%) saturate(3312%) hue-rotate(131deg) brightness(99%) contrast(101%)}.searchbar-search-icon[_ngcontent-%COMP%]{display:none!important}"]}),t}()},i5GC:function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var o=n("Xd5C"),i=n("TYT/"),c=function(){function t(t){this.advertClient=t,this.showFooter=!0}return t.prototype.getAdvert=function(t,e){return this.advertClient.get(t,e)},t.\u0275fac=function(e){return new(e||t)(i.hc(o.b))},t.\u0275prov=i.Ub({token:t,factory:t.\u0275fac,providedIn:"root"}),t}()}}]);