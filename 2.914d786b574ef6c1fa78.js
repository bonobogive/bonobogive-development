(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{"9B06":function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n("Xd5C");var r=n("mveN"),i=n("TYT/"),o=function(){function e(e){this.favouriteService=e}return e.prototype.transform=function(e,t){return!(!this.favouriteService.userFavouriteAdvertIds||!this.favouriteService.userFavouriteAdvertIds.find((function(t){return t.entityPrimaryKey===e})))},e.\u0275fac=function(t){return new(t||e)(i.Yb(r.a))},e.\u0275pipe=i.Xb({name:"favourite",type:e,pure:!1}),e}()},"Mm/0":function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));var r=n("lGQG"),i=n("l3hs"),o=n("c7TG"),a=n("a/9d"),c=n("M2ZX"),s=n("nUpg"),u=n("TYT/"),l=n("DUip"),d=n("Valr"),v=n("QJY3"),f=["removeFocusInput"];function p(e,t){1&e&&u.Zb(0,"ion-back-button",11)}function h(e,t){1&e&&(u.dc(0,"span",12),u.Kc(1,"\ud83d\udd34"),u.cc())}var g=function(){function e(e,t,n,r,i,o,a,c,s,u,l){this.events=e,this.searchService=t,this.auth=n,this.camera=r,this.platform=i,this.nativeStorage=o,this.menuCtrl=a,this.router=c,this.navCtrl=s,this.toastController=u,this.webSocketNotificationService=l,this.isApp=!1,this.isSearchPage=!1,this.placeholder='try "table"',this.placeholders=["Search - it's all free!"],this.isApp=!this.platform.is("desktop")}return e.prototype.ngOnInit=function(){this.isSearchPage=!!this.isSamePage("/search"),this.randomPlaceHolder()},e.prototype.randomPlaceHolder=function(){var e=this.placeholders[Math.floor(Math.random()*this.placeholders.length)];this.placeholder=e},e.prototype.uploadImage=function(e){console.log("image chosen")},e.prototype.goToPost=function(){this.navCtrl.navigateForward("post")},e.prototype.openMainMenu=function(){this.menuCtrl.open("start")},e.prototype.goToIntroduction=function(){this.navCtrl.navigateForward("introduction")},e.prototype.search=function(e){e.target.blur(),this.isSamePage("search")||this.navCtrl.navigateForward("search"),e.target.value&&(this.searchService.refreshSearchResults(),this.searchService.searchPageSearchRequest.searchQuery=e.target.value,this.searchService.search(null,null))},e.prototype.isSamePage=function(e){return this.router.url===e&&(console.log("same page"),!0)},e.prototype.openNotifications=function(){this.auth&&this.auth.user?this.navCtrl.navigateForward("notifications"):this.goToLogin()},e.prototype.goToRegister=function(){this.navCtrl.navigateForward("register")},e.prototype.goToLogin=function(){this.navCtrl.navigateForward("login")},e.prototype.redirectToSearch=function(e){this.removeFocusInput.nativeElement.focus().this.navCtrl.navigateForward("search/true")},e.prototype.takePicture=function(e){return t=this,void 0,r=function(){var e,t,n;return function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function c(o){return function(c){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(c){o=[6,c],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,c])}}}(this,(function(r){switch(r.label){case 0:if(!this.auth||!this.auth.user)return this.goToLogin(),[2];if(this.goToPost(),this.platform.is("desktop"))return this.goToPost(),[2];e={quality:50,destinationType:this.camera.DestinationType.DATA_URL,encodingType:this.camera.EncodingType.JPEG,mediaType:this.camera.MediaType.PICTURE,targetWidth:1280,targetHeight:1280,saveToPhotoAlbum:!1},r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this.camera.getPicture(e)];case 2:return t=r.sent(),this.nativeStorage.setItem("latestPicture","data:image/jpeg;base64,"+t).then((function(){return console.log("Stored item!")}),(function(e){return console.error("Error storing item",e)})),this.navCtrl.navigateForward("post"),[3,4];case 3:return n=r.sent(),console.log(n),[3,4];case 4:return[2]}}))},new((n=void 0)||(n=Promise))((function(e,i){function o(e){try{c(r.next(e))}catch(t){i(t)}}function a(e){try{c(r.throw(e))}catch(t){i(t)}}function c(t){var r;t.done?e(t.value):(r=t.value,r instanceof n?r:new n((function(e){e(r)}))).then(o,a)}c((r=r.apply(t,[])).next())}));var t,n,r},e.prototype.placeHolderFocus=function(){this.placeholder="try 'table'"},e.prototype.placeHolderBlur=function(){this.placeholder="Search - it's all free!"},e.\u0275fac=function(t){return new(t||e)(u.Yb(o.d),u.Yb(i.a),u.Yb(r.a),u.Yb(a.a),u.Yb(o.eb),u.Yb(c.a),u.Yb(o.bb),u.Yb(l.i),u.Yb(o.db),u.Yb(o.kb),u.Yb(s.b))},e.\u0275cmp=u.Sb({type:e,selectors:[["app-topbar"]],viewQuery:function(e,t){var n;1&e&&u.Oc(f,!0),2&e&&u.Bc(n=u.mc())&&(t.removeFocusInput=n.first)},inputs:{title:"title",displaySearchBar:"displaySearchBar",displayCameraIcon:"displayCameraIcon"},decls:13,vars:9,consts:[[1,"ion-no-padding"],["slot","start","fill","clear",3,"click"],["name","menu",2,"font-size","2em"],["slot","start","color","primary","defaultHref","search",4,"ngIf"],["id","main-search-bar","autofocus","","slot","start",1,"searchbar",3,"searchIcon","ngModel","showCancelButton","clearIcon","placeholder","ngModelChange","search","ionFocus","ionBlur"],["searchInput",""],["type","hidden",2,"display","none"],["removeFocusInput",""],["slot","end","fill","clear",1,"ion-no-padding",3,"click"],[1,"ion-no-padding",3,"src"],["class","new-notification-position",4,"ngIf"],["slot","start","color","primary","defaultHref","search"],[1,"new-notification-position"]],template:function(e,t){1&e&&(u.dc(0,"ion-toolbar",0),u.dc(1,"ion-button",1),u.lc("click",(function(){return t.openMainMenu()})),u.Zb(2,"ion-icon",2),u.cc(),u.Jc(3,p,1,0,"ion-back-button",3),u.dc(4,"ion-searchbar",4,5),u.lc("ngModelChange",(function(e){return t.searchService.searchPageSearchRequest.searchQuery=e}))("search",(function(e){return t.search(e)}))("ionFocus",(function(){return t.placeHolderFocus()}))("ionBlur",(function(){return t.placeHolderBlur()})),u.cc(),u.Zb(6,"input",6,7),u.dc(8,"ion-button",8),u.lc("click",(function(e){return t.takePicture(e)})),u.Zb(9,"ion-icon",9),u.cc(),u.dc(10,"ion-button",8),u.lc("click",(function(){return t.openNotifications()})),u.Zb(11,"ion-icon",9),u.Jc(12,h,2,0,"span",10),u.cc(),u.cc()),2&e&&(u.Mb(3),u.vc("ngIf",!t.isSearchPage),u.Mb(1),u.vc("searchIcon","menu")("ngModel",t.searchService.searchPageSearchRequest.searchQuery)("showCancelButton",!1)("clearIcon","true")("placeholder",t.placeholder),u.Mb(5),u.vc("src","/assets/icon/menu/post-advert.svg"),u.Mb(2),u.vc("src","/assets/icon/menu/notification.svg"),u.Mb(1),u.vc("ngIf",t.webSocketNotificationService.newNotifictions))},directives:[o.X,o.j,o.t,d.l,o.L,o.jb,v.h,v.k,o.g,o.h],styles:[".title[_ngcontent-%COMP%]{color:var(--ion-color-primary);line-height:1em;font-size:.8em}.offline[_ngcontent-%COMP%]{background-color:var(--ion-color-danger);color:var(--ion-color-danger-contrast);text-transform:uppercase;text-align:center;font-size:.8em}.new-notification-position[_ngcontent-%COMP%]{position:absolute;right:1.5em;top:.5em;font-size:.7em}ion-searchbar[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{display:none!important}ion-icon.custom[_ngcontent-%COMP%]{font-size:2em;color:var(--ion-color-primary)!important;-webkit-filter:brightness(0) saturate(100%) invert(31%) sepia(30%) saturate(3312%) hue-rotate(131deg) brightness(99%) contrast(101%);filter:brightness(0) saturate(100%) invert(31%) sepia(30%) saturate(3312%) hue-rotate(131deg) brightness(99%) contrast(101%)}.searchbar-search-icon[_ngcontent-%COMP%]{display:none!important}"]}),e}()},NCXR:function(e,t,n){"use strict";n.d(t,"a",(function(){return J}));var r=n("c7TG"),i=n("Xd5C"),o=n("i5GC"),a=n("lGQG"),c=n("mveN"),s=n("l3hs"),u=n("TYT/"),l=n("Valr"),d=function(){function e(e){this.advertService=e}return e.prototype.transform=function(e,t){var n=new Date,r=new Date(e.dateTimeUtcCreated),i=new Date(r);i.setDate(i.getDate()+e.expiryLength);var o=Math.abs(i.getTime()-n.getTime());return Math.ceil(o/864e5)},e.\u0275fac=function(t){return new(t||e)(u.Yb(o.a))},e.\u0275pipe=u.Xb({name:"advertExpiry",type:e,pure:!0}),e}(),v=n("bCQN"),f=n("9B06"),p=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{s(r.next(e))}catch(t){o(t)}}function c(e){try{s(r.throw(e))}catch(t){o(t)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,c)}s((r=r.apply(e,t||[])).next())}))},h=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function c(o){return function(c){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(c){o=[6,c],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,c])}}};function g(e,t){1&e&&(u.dc(0,"h2"),u.Kc(1,"Draft"),u.cc())}function b(e,t){if(1&e&&(u.bc(0),u.Zb(1,"img",12),u.ac()),2&e){var n=u.pc(2).$implicit;u.Mb(1),u.vc("src",n.images[0].url,u.Ec)}}function m(e,t){if(1&e&&(u.bc(0),u.Zb(1,"img",12),u.qc(2,"advertImageUrl"),u.ac()),2&e){var n=u.pc(2).$implicit;u.Mb(1),u.vc("src",u.rc(2,1,n.category),u.Ec)}}function y(e,t){if(1&e){var n=u.ec();u.dc(0,"ion-icon",16),u.lc("click",(function(){u.Dc(n);var e=u.pc(3).$implicit;return u.pc(2).deleteFavourite(e)})),u.cc()}}function w(e,t){if(1&e){var n=u.ec();u.dc(0,"ion-icon",17),u.lc("click",(function(){u.Dc(n);var e=u.pc(3).$implicit;return u.pc(2).addFavourite(e)})),u.cc()}}function C(e,t){if(1&e&&(u.dc(0,"div",13),u.Jc(1,y,1,0,"ion-icon",14),u.qc(2,"favourite"),u.Jc(3,w,1,0,"ion-icon",15),u.qc(4,"favourite"),u.cc()),2&e){var n=u.pc(2).$implicit,r=u.pc(2);u.Mb(1),u.vc("ngIf",u.sc(2,2,n.primaryKey,r.favourtieService.userFavouriteAdvertIds)),u.Mb(2),u.vc("ngIf",!u.sc(4,5,n.primaryKey,r.favourtieService.userFavouriteAdvertIds))}}function M(e,t){if(1&e){var n=u.ec();u.dc(0,"ion-icon",18),u.lc("click",(function(){u.Dc(n);var e=u.pc(2).$implicit;return u.pc(2).presentAlertConfirm(e)})),u.cc()}}function P(e,t){if(1&e){var n=u.ec();u.dc(0,"div",5),u.Jc(1,g,2,0,"h2",6),u.dc(2,"ion-thumbnail"),u.Jc(3,b,2,1,"ng-container",6),u.Jc(4,m,3,3,"ng-container",6),u.cc(),u.dc(5,"figcaption",7),u.dc(6,"div",8),u.lc("click",(function(){u.Dc(n);var e=u.pc().$implicit;return u.pc(2).loadAdvert(e)})),u.dc(7,"h1",9),u.Kc(8),u.cc(),u.dc(9,"small"),u.Kc(10),u.Zb(11,"br"),u.Kc(12),u.qc(13,"advertExpiry"),u.cc(),u.cc(),u.Jc(14,C,5,8,"div",10),u.cc(),u.Jc(15,M,1,0,"ion-icon",11),u.cc()}if(2&e){var r=u.pc().$implicit,i=u.pc(2);u.Mb(1),u.vc("ngIf",r.draft),u.Mb(2),u.vc("ngIf",(null==r||null==r.images?null:r.images.length)>0),u.Mb(1),u.vc("ngIf",(null==r||null==r.images?null:r.images.length)<1),u.Mb(4),u.Mc(" ",r.title," "),u.Mb(2),u.Mc(" ",null==r.address||null==r.address.area?null:r.address.area.split(",")[0]," "),u.Mb(2),u.Lc(u.rc(13,8,r)),u.Mb(2),u.vc("ngIf",i.enableFavourites),u.Mb(1),u.vc("ngIf",i.showDelete)}}function I(e,t){if(1&e&&(u.dc(0,"div"),u.Jc(1,P,16,10,"div",4),u.cc()),2&e){var n=t.$implicit;u.Mb(1),u.vc("ngIf",n)}}function k(e,t){if(1&e&&(u.dc(0,"div",2),u.Jc(1,I,2,1,"div",3),u.cc()),2&e){var n=u.pc();u.Mb(1),u.vc("ngForOf",n.adverts)}}function F(e,t){1&e&&(u.dc(0,"h2"),u.Kc(1,"Draft"),u.cc())}function A(e,t){if(1&e&&(u.bc(0),u.Zb(1,"img",12),u.ac()),2&e){var n=u.pc(2).$implicit;u.Mb(1),u.vc("src",n.images[0].url,u.Ec)}}function O(e,t){if(1&e&&(u.bc(0),u.Zb(1,"img",12),u.qc(2,"advertImageUrl"),u.ac()),2&e){var n=u.pc(2).$implicit;u.Mb(1),u.vc("src",u.rc(2,1,n.category),u.Ec)}}function S(e,t){if(1&e){var n=u.ec();u.dc(0,"ion-icon",24),u.lc("click",(function(){u.Dc(n);var e=u.pc(3).$implicit;return u.pc(2).deleteFavourite(e)})),u.cc()}}function _(e,t){if(1&e){var n=u.ec();u.dc(0,"ion-icon",25),u.lc("click",(function(){u.Dc(n);var e=u.pc(3).$implicit;return u.pc(2).addFavourite(e)})),u.cc()}}function x(e,t){if(1&e&&(u.dc(0,"div",13),u.Jc(1,S,1,0,"ion-icon",22),u.qc(2,"favourite"),u.Jc(3,_,1,0,"ion-icon",23),u.qc(4,"favourite"),u.cc()),2&e){var n=u.pc(2).$implicit,r=u.pc(2);u.Mb(1),u.vc("ngIf",u.sc(2,2,n.primaryKey,r.favourtieService.userFavouriteAdvertIds)),u.Mb(2),u.vc("ngIf",!u.sc(4,5,n.primaryKey,r.favourtieService.userFavouriteAdvertIds))}}function T(e,t){if(1&e){var n=u.ec();u.dc(0,"ion-icon",26),u.lc("click",(function(){u.Dc(n);var e=u.pc(2).$implicit;return u.pc(2).presentAlertConfirm(e)})),u.cc()}}function Y(e,t){if(1&e){var n=u.ec();u.dc(0,"ion-item"),u.Jc(1,F,2,0,"h2",6),u.dc(2,"ion-thumbnail",20),u.lc("click",(function(){u.Dc(n);var e=u.pc().$implicit;return u.pc(2).loadAdvert(e)})),u.Jc(3,A,2,1,"ng-container",6),u.Jc(4,O,3,3,"ng-container",6),u.cc(),u.dc(5,"ion-label",20),u.lc("click",(function(){u.Dc(n);var e=u.pc().$implicit;return u.pc(2).loadAdvert(e)})),u.dc(6,"h1",9),u.Kc(7),u.cc(),u.dc(8,"small"),u.Kc(9),u.cc(),u.dc(10,"small"),u.Kc(11),u.qc(12,"advertExpiry"),u.cc(),u.cc(),u.Jc(13,x,5,8,"div",10),u.Jc(14,T,1,0,"ion-icon",21),u.cc()}if(2&e){var r=u.pc().$implicit,i=u.pc(2);u.Mb(1),u.vc("ngIf",r.draft),u.Mb(2),u.vc("ngIf",(null==r||null==r.images?null:r.images.length)>0),u.Mb(1),u.vc("ngIf",(null==r||null==r.images?null:r.images.length)<1),u.Mb(3),u.Mc(" ",r.title," "),u.Mb(2),u.Lc(r.status),u.Mb(2),u.Lc(u.rc(12,8,r)),u.Mb(2),u.vc("ngIf",i.enableFavourites),u.Mb(1),u.vc("ngIf",i.showDelete)}}function D(e,t){if(1&e&&(u.dc(0,"ion-list"),u.Jc(1,Y,15,10,"ion-item",6),u.cc()),2&e){var n=t.$implicit;u.Mb(1),u.vc("ngIf",n)}}function K(e,t){if(1&e&&(u.dc(0,"div",19),u.Jc(1,D,2,1,"ion-list",3),u.cc()),2&e){var n=u.pc();u.Mb(1),u.vc("ngForOf",n.adverts)}}var J=function(){function e(e,t,n,r,i,o,a,c,s,u){this.events=e,this.searchService=t,this.auth=n,this.navController=r,this.favourtieService=i,this.alertController=o,this.advertService=a,this.toastController=c,this.alertCtrl=s,this.advertClient=u,this.showDelete=!1,this.linear=!1,this.imageIndex=0,this.noImage=!0,this.containImage=!0}return Object.defineProperty(e.prototype,"adverts",{get:function(){return this._adverts},set:function(e){this._adverts=e},enumerable:!0,configurable:!0}),e.prototype.ngOnInit=function(){},e.prototype.presentAdvertDeletedToast=function(e){return p(this,void 0,void 0,(function(){return h(this,(function(t){switch(t.label){case 0:return[4,this.toastController.create({message:"Advert "+e.title+" deleted",duration:2e3})];case 1:return t.sent().present(),[2]}}))}))},e.prototype.presentAlertConfirm=function(e){return p(this,void 0,void 0,(function(){var t=this;return h(this,(function(n){switch(n.label){case 0:return[4,this.alertController.create({header:"Confirm",message:"Are you sure you want to delete this advert?",buttons:[{text:"Cancel",role:"cancel",cssClass:"secondary",handler:function(){return p(t,void 0,void 0,(function(){return h(this,(function(e){return[2]}))}))}},{text:"Yes",handler:function(){return p(t,void 0,void 0,(function(){return h(this,(function(t){switch(t.label){case 0:return[4,this.deleteAdvertConfirm(e)];case 1:return t.sent(),[4,this.presentAdvertDeletedToast(e)];case 2:return t.sent(),[2]}}))}))}}]})];case 1:return[4,n.sent().present()];case 2:return n.sent(),[2]}}))}))},e.prototype.deleteAdvertConfirm=function(e){return p(this,void 0,void 0,(function(){return h(this,(function(t){switch(t.label){case 0:return[4,this.advertClient.delete(e.partitionKey,e.sortKey)];case 1:return t.sent(),console.log("advert "+e.primaryKey+" deleted"),[2]}}))}))},e.prototype.loadAdvert=function(e){this.navController.navigateForward(e.draft?"post/"+e.primaryKey:"advert/"+e.primaryKey)},e.prototype.showDeleteFavouriteConfirm=function(e){return p(this,void 0,void 0,(function(){var t=this;return h(this,(function(n){switch(n.label){case 0:return[4,this.alertCtrl.create({header:"Delete favourite?",message:"Are you sure you want to delete this favourite?",buttons:[{text:"Yes",handler:function(){t.deleteFavourite(e)}},{text:"No",handler:function(){console.log("Agree clicked")}}]})];case 1:return[4,n.sent().present()];case 2:return n.sent(),[2]}}))}))},e.prototype.deleteFavourite=function(e){this.auth&&this.auth.user?this.favourtieService.deleteFavouriteByAdvertEntity(e).subscribe((function(e){}),(function(e){console.log(e)})):this.navController.navigateForward("login")},e.prototype.addFavourite=function(e){this.auth&&this.auth.user?e&&this.favourtieService.addFavourite(e.primaryKey):this.navController.navigateForward("login")},e.\u0275fac=function(t){return new(t||e)(u.Yb(r.d),u.Yb(s.a),u.Yb(a.a),u.Yb(r.db),u.Yb(c.a),u.Yb(r.b),u.Yb(o.a),u.Yb(r.kb),u.Yb(r.b),u.Yb(i.b))},e.\u0275cmp=u.Sb({type:e,selectors:[["app-adverts"]],inputs:{adverts:"adverts",showDelete:"showDelete",enableFavourites:"enableFavourites",linear:"linear"},decls:2,vars:2,consts:[["class","advert-wrapper",4,"ngIf"],["style","display:block;",4,"ngIf"],[1,"advert-wrapper"],[4,"ngFor","ngForOf"],["class","advert",4,"ngIf"],[1,"advert"],[4,"ngIf"],[1,"advert-figure-content"],[1,"advert-figure-context-text",3,"click"],[1,"advert-thumbnail-title"],["class","favourite-heart",4,"ngIf"],["name","trash",3,"click",4,"ngIf"],[3,"src"],[1,"favourite-heart"],["name","heart","class","favourited","isActive","true","style","font-size: 40px;",3,"click",4,"ngIf"],["name","heart-empty","class","regular","isActive","false","style","font-size: 40px;",3,"click",4,"ngIf"],["name","heart","isActive","true",1,"favourited",2,"font-size","40px",3,"click"],["name","heart-empty","isActive","false",1,"regular",2,"font-size","40px",3,"click"],["name","trash",3,"click"],[2,"display","block"],[3,"click"],["slot","end","name","trash",3,"click",4,"ngIf"],["name","heart","class","favourited","isActive","true","style","font-size: 40px; color:red;",3,"click",4,"ngIf"],["name","heart-empty","class","regular","isActive","false","style","font-size: 40px; color:red;",3,"click",4,"ngIf"],["name","heart","isActive","true",1,"favourited",2,"font-size","40px","color","red",3,"click"],["name","heart-empty","isActive","false",1,"regular",2,"font-size","40px","color","red",3,"click"],["slot","end","name","trash",3,"click"]],template:function(e,t){1&e&&(u.Jc(0,k,2,1,"div",0),u.Jc(1,K,2,1,"div",1)),2&e&&(u.vc("ngIf",!t.linear),u.Mb(1),u.vc("ngIf",t.linear))},directives:[l.l,l.k,r.U,r.t,r.A,r.y,r.z],pipes:[d,v.a,f.a],styles:[".advert-wrapper[_ngcontent-%COMP%]   .advert[_ngcontent-%COMP%]{float:left;width:98vw;padding:1em;box-sizing:border-box}.advert-wrapper[_ngcontent-%COMP%]   h1.advert-thumbnail-title[_ngcontent-%COMP%]{width:98vw;font-size:1em;margin:0;padding:0;text-overflow:ellipsis;white-space:nowrap;overflow:hidden}@media (min-width:300px){.advert-wrapper[_ngcontent-%COMP%]   .advert[_ngcontent-%COMP%], .advert-wrapper[_ngcontent-%COMP%]   h1.advert-thumbnail-title[_ngcontent-%COMP%]{width:47vw}}@media (min-width:500px){.advert-wrapper[_ngcontent-%COMP%]   .advert[_ngcontent-%COMP%], .advert-wrapper[_ngcontent-%COMP%]   h1.advert-thumbnail-title[_ngcontent-%COMP%]{width:31vw}}@media (min-width:600px){.advert-wrapper[_ngcontent-%COMP%]   .advert[_ngcontent-%COMP%], .advert-wrapper[_ngcontent-%COMP%]   h1.advert-thumbnail-title[_ngcontent-%COMP%]{width:23vw}}.advert-wrapper[_ngcontent-%COMP%]   .advert-thumbnail[_ngcontent-%COMP%]{margin:0;padding:0}.advert-wrapper[_ngcontent-%COMP%]   .advert-figure-content[_ngcontent-%COMP%]{position:relative;padding:.5em}.advert-wrapper[_ngcontent-%COMP%]   .advert-figure-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{padding:0;margin:0}.advert-wrapper[_ngcontent-%COMP%]   .favourite-heart[_ngcontent-%COMP%]{float:right;position:absolute;bottom:0;right:.5em}.advert-wrapper[_ngcontent-%COMP%]   .favourite-heart[_ngcontent-%COMP%]   .favourited[_ngcontent-%COMP%], .advert-wrapper[_ngcontent-%COMP%]   .favourite-heart[_ngcontent-%COMP%]   .regular[_ngcontent-%COMP%]{color:#b93a32}.advert-wrapper[_ngcontent-%COMP%]   .favourite-heart-linear[_ngcontent-%COMP%]{float:right;position:absolute;top:1.4em;right:1em}.advert-wrapper[_ngcontent-%COMP%]   .favourite-heart-linear[_ngcontent-%COMP%]   .favourited[_ngcontent-%COMP%], .advert-wrapper[_ngcontent-%COMP%]   .favourite-heart-linear[_ngcontent-%COMP%]   .regular[_ngcontent-%COMP%]{color:#b93a32}"]}),e}()},bCQN:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n("Xd5C"),i=n("TYT/"),o=function(){function e(){}return e.prototype.transform=function(e){return this.getAdvertCategoryImage(e)},e.prototype.getAdvertCategoryImage=function(e){var t="";switch(e){case r.d.First:t="assets/images/categories/FirstComeFirstServed.svg";break;case r.d.All:t="assets/images/categories/all.svg";break;case r.d.Fashion:t="assets/images/categories/FashionAndAccessories.svg";break;case r.d.Baby:t="assets/images/categories/BabyAndChild.svg";break;case r.d.Sport:t="assets/images/categories/SportAndLeisure.svg";break;case r.d.Free:t="assets/images/categories/FreeService.svg";break;case r.d.Home:t="assets/images/categories/HomeAndGarden.svg";break;case r.d.Media:t="assets/images/categories/MovieAndBook.svg";break;case r.d.Pet:t="assets/images/categories/PetAccessories.svg";break;case r.d.Motor:t="assets/images/categories/MotorsAndAccessories.svg";break;default:t="assets/images/no-image.png"}return t},e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=i.Xb({name:"advertImageUrl",type:e,pure:!0}),e}()},i5GC:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n("Xd5C"),i=n("TYT/"),o=function(){function e(e){this.advertClient=e,this.showFooter=!0}return e.prototype.getAdvert=function(e,t){return this.advertClient.get(e,t)},e.\u0275fac=function(t){return new(t||e)(i.hc(r.b))},e.\u0275prov=i.Ub({token:e,factory:e.\u0275fac,providedIn:"root"}),e}()},mveN:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n("lGQG"),i=n("i5GC"),o=n("Xd5C"),a=n("xMyE"),c=n("TYT/"),s=function(){function e(e,t,n){this.advertService=e,this.auth=t,this.advertClient=n,this.userFavouriteAdvertIds=[],this.userFavourites()}return e.prototype.userFavourites=function(){var e=this;if(this.auth&&this.auth.user&&this.auth.user.uid){var t=new o.r;t.nextRequestBlob=void 0,t.take=1e3,this.advertClient.favouritesAdverts(this.auth.user.uid,t).subscribe((function(t){e.userFavouriteAdvertIds=t.entities}))}},e.prototype.addFavourite=function(e){return t=this,void 0,r=function(){var t,n,r=this;return function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function c(o){return function(c){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(c){o=[6,c],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,c])}}}(this,(function(i){return t=e+this.auth.user.uid,(n=new o.j).primaryKey=t,n.entityPrimaryKey=e,this.userFavouriteAdvertIds.push(n),this.advertClient.addFavourite(e,this.auth.user.uid).subscribe((function(e){var t=r.userFavouriteAdvertIds.findIndex((function(t){return t.entityPrimaryKey===e.entityPrimaryKey}));-1!==t?(r.userFavouriteAdvertIds[t]=e,console.log("Advert added "+e)):console.log("Couldn't find array to update")})),[2]}))},new((n=void 0)||(n=Promise))((function(e,i){function o(e){try{c(r.next(e))}catch(t){i(t)}}function a(e){try{c(r.throw(e))}catch(t){i(t)}}function c(t){var r;t.done?e(t.value):(r=t.value,r instanceof n?r:new n((function(e){e(r)}))).then(o,a)}c((r=r.apply(t,[])).next())}));var t,n,r},e.prototype.deleteFavouriteByAdvertEntity=function(e){var t=this;return this.advertClient.deleteFavourite(this.auth.user.uid,e.primaryKey).pipe(Object(a.a)((function(n){t.userFavouriteAdvertIds=t.userFavouriteAdvertIds.filter((function(t){return t.entityPrimaryKey!==e.primaryKey})),console.log("Favourite for advert "+e.primaryKey+" deleted")})))},e.\u0275fac=function(t){return new(t||e)(c.hc(i.a),c.hc(r.a),c.hc(o.b))},e.\u0275prov=c.Ub({token:e,factory:e.\u0275fac,providedIn:"root"}),e}()}}]);