(window.webpackJsonp=window.webpackJsonp||[]).push([[27],{"7CEM":function(e,t,o){"use strict";o.r(t),o.d(t,"ForgotPasswordPageModule",(function(){return y}));var n=o("Valr"),r=o("QJY3"),i=o("DUip"),c=o("c7TG"),a=o("9vc0"),s=o("lGQG"),l=o("TYT/"),u=o("Mm/0"),p=function(e,t,o,n){return new(o||(o=Promise))((function(r,i){function c(e){try{s(n.next(e))}catch(t){i(t)}}function a(e){try{s(n.throw(e))}catch(t){i(t)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(c,a)}s((n=n.apply(e,t||[])).next())}))},d=function(e,t){var o,n,r,i,c={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,n=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!((r=(r=c.trys).length>0&&r[r.length-1])||6!==i[0]&&2!==i[0])){c=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){c.label=i[1];break}if(6===i[0]&&c.label<r[1]){c.label=r[1],r=i;break}if(r&&c.label<r[2]){c.label=r[2],c.ops.push(i);break}r[2]&&c.ops.pop(),c.trys.pop();continue}i=t.call(e,c)}catch(a){i=[6,a],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}};function h(e,t){if(1&e){var o=l.ec();l.dc(0,"form",4),l.lc("ngSubmit",(function(){return l.Dc(o),l.pc().sendRecoveryEmail()})),l.dc(1,"ion-grid"),l.dc(2,"ion-row"),l.dc(3,"ion-item"),l.dc(4,"ion-label",5),l.Kc(5,"email"),l.cc(),l.Zb(6,"ion-input",6),l.cc(),l.cc(),l.dc(7,"ion-row"),l.dc(8,"ion-button",7),l.Kc(9," Send recovery email "),l.cc(),l.cc(),l.cc(),l.cc()}if(2&e){var n=l.pc();l.vc("formGroup",n.forgotPasswordGroup),l.Mb(8),l.vc("disabled",!n.forgotPasswordGroup.valid)}}function f(e,t){if(1&e){var o=l.ec();l.dc(0,"ion-row",8),l.dc(1,"ion-button",9),l.lc("click",(function(){return l.Dc(o),l.pc().alreadyHaveVerificationCode()})),l.Kc(2," I have a verification token ready "),l.cc(),l.cc()}}function m(e,t){if(1&e){var o=l.ec();l.dc(0,"ion-row",8),l.dc(1,"ion-button",9),l.lc("click",(function(){return l.Dc(o),l.pc().alreadyHaveVerificationCode()})),l.Kc(2," Try again "),l.cc(),l.cc()}}function g(e,t){if(1&e){var o=l.ec();l.dc(0,"form",4),l.lc("ngSubmit",(function(){return l.Dc(o),l.pc().resetPassword()})),l.dc(1,"ion-grid"),l.dc(2,"ion-row"),l.Kc(3," Please enter the verification code we have emailed to you "),l.cc(),l.dc(4,"ion-row"),l.dc(5,"ion-item"),l.dc(6,"ion-label",5),l.Kc(7,"Verification code"),l.cc(),l.Zb(8,"ion-input",10),l.cc(),l.cc(),l.dc(9,"ion-row"),l.dc(10,"ion-item"),l.dc(11,"ion-label",5),l.Kc(12,"email address"),l.cc(),l.Zb(13,"ion-input",6),l.cc(),l.cc(),l.dc(14,"ion-row"),l.dc(15,"ion-item"),l.dc(16,"ion-label",5),l.Kc(17,"New password"),l.cc(),l.Zb(18,"ion-input",11),l.cc(),l.cc(),l.dc(19,"ion-row"),l.dc(20,"ion-item"),l.dc(21,"ion-label",5),l.Kc(22,"Confirm new password"),l.cc(),l.Zb(23,"ion-input",12),l.cc(),l.cc(),l.dc(24,"ion-row"),l.dc(25,"ion-button",13),l.Kc(26," Reset password "),l.cc(),l.cc(),l.cc(),l.cc()}if(2&e){var n=l.pc();l.vc("formGroup",n.resetPasswordFormGroup),l.Mb(25),l.vc("disabled",!n.resetPasswordFormGroup.valid)}}var b=function(){function e(e,t,o,n,i,c){this.navController=e,this.loadingCtrl=t,this.errorService=o,this.toastCtrl=n,this.formBuilder=i,this.authSerivce=c,this.displayErrorMessage=!1,this.forgotPasswordGroup=this.formBuilder.group({email:["",r.o.compose([r.o.required])]}),this.resetPasswordFormGroup=this.formBuilder.group({code:["",r.o.compose([r.o.required])],email:["",r.o.compose([r.o.required,r.o.email])],newPassword:["",r.o.compose([r.o.required,r.o.minLength(8)])],confirmNewPassword:["",r.o.compose([r.o.required,r.o.minLength(8)])],showPassword:[!1]},{validator:this.matchingPasswords("newPassword","confirmNewPassword")})}return e.prototype.matchingPasswords=function(e,t){return function(o){if(o.controls[e].value!==o.controls[t].value)return{mismatchedPasswords:!0}}},e.prototype.ngOnInit=function(){},e.prototype.emailSentToast=function(e){return p(this,void 0,void 0,(function(){return d(this,(function(t){switch(t.label){case 0:return[4,this.toastCtrl.create({message:"A recovery password email has been sent to "+e,duration:3e3,position:"bottom"})];case 1:return[4,t.sent().present()];case 2:return t.sent(),[2]}}))}))},e.prototype.sendRecoveryEmail=function(){return p(this,void 0,void 0,(function(){var e,t,o;return d(this,(function(n){switch(n.label){case 0:return[4,this.loadingCtrl.create({message:"Sending email..."})];case 1:return[4,(e=n.sent()).present()];case 2:return n.sent(),[4,this.authSerivce.forgotPassword(t=this.forgotPasswordGroup.value.email)];case 3:return o=n.sent(),console.log(o),[4,e.dismiss()];case 4:return n.sent(),this.emailSent=!0,this.emailSentToast(t),[2]}}))}))},e.prototype.alreadyHaveVerificationCode=function(){this.emailSent=!this.emailSent},e.prototype.tryAgain=function(){this.emailSent=!1},e.prototype.resetPassword=function(){return p(this,void 0,void 0,(function(){var e,t;return d(this,(function(o){switch(o.label){case 0:return[4,this.loadingCtrl.create({message:"Reseting password..."})];case 1:e=o.sent(),o.label=2;case 2:return o.trys.push([2,6,,8]),[4,e.present()];case 3:return o.sent(),[4,this.authSerivce.resetPassword(this.resetPasswordFormGroup.value.email,this.resetPasswordFormGroup.value.newPassword,this.resetPasswordFormGroup.value.code)];case 4:return o.sent(),this.navController.navigateRoot("login"),[4,e.dismiss()];case 5:return o.sent(),[3,8];case 6:return t=o.sent(),[4,e.dismiss()];case 7:return o.sent(),console.log(t),[3,8];case 8:return[2]}}))}))},e.\u0275fac=function(t){return new(t||e)(l.Yb(c.db),l.Yb(c.ab),l.Yb(a.a),l.Yb(c.kb),l.Yb(r.b),l.Yb(s.a))},e.\u0275cmp=l.Sb({type:e,selectors:[["app-forgot-password"]],decls:8,vars:4,consts:[["title","Forgot Password"],[1,"forgot-password"],["class","ion-padding",3,"formGroup","ngSubmit",4,"ngIf"],["class","ion-padding",4,"ngIf"],[1,"ion-padding",3,"formGroup","ngSubmit"],["position","stacked"],["type","email","formControlName","email"],["primary","","block","","type","submit","name","action",3,"disabled"],[1,"ion-padding"],["primary","","block","","name","action",3,"click"],["type","text","formControlName","code"],["type","password","formControlName","newPassword"],["type","password","formControlName","confirmNewPassword"],["primary","","block","","name","action","type","submit",3,"disabled"]],template:function(e,t){1&e&&(l.dc(0,"ion-header"),l.Zb(1,"app-topbar",0),l.cc(),l.dc(2,"ion-content",1),l.Jc(3,h,10,2,"form",2),l.dc(4,"ion-grid"),l.Jc(5,f,3,0,"ion-row",3),l.Jc(6,m,3,0,"ion-row",3),l.cc(),l.Jc(7,g,27,2,"form",2),l.cc()),2&e&&(l.Mb(3),l.vc("ngIf",!t.emailSent),l.Mb(2),l.vc("ngIf",!t.emailSent),l.Mb(1),l.vc("ngIf",t.emailSent),l.Mb(1),l.vc("ngIf",t.emailSent))},directives:[c.s,u.a,c.p,n.l,c.r,r.q,r.i,r.d,c.K,c.y,c.z,c.x,c.jb,r.h,r.c,c.j],styles:[""]}),e}(),v=o("j1ZV"),w=[{path:"",component:b}],y=function(){function e(){}return e.\u0275mod=l.Wb({type:e}),e.\u0275inj=l.Vb({factory:function(t){return new(t||e)},imports:[[n.c,r.e,r.m,c.Y,i.k.forChild(w),v.a]]}),e}()},"Mm/0":function(e,t,o){"use strict";o.d(t,"a",(function(){return g}));var n=o("lGQG"),r=o("l3hs"),i=o("c7TG"),c=o("a/9d"),a=o("M2ZX"),s=o("nUpg"),l=o("TYT/"),u=o("DUip"),p=o("Valr"),d=o("QJY3"),h=["removeFocusInput"];function f(e,t){1&e&&l.Zb(0,"ion-back-button",11)}function m(e,t){1&e&&(l.dc(0,"span",12),l.Kc(1,"\ud83d\udd34"),l.cc())}var g=function(){function e(e,t,o,n,r,i,c,a,s,l,u){this.events=e,this.searchService=t,this.auth=o,this.camera=n,this.platform=r,this.nativeStorage=i,this.menuCtrl=c,this.router=a,this.navCtrl=s,this.toastController=l,this.webSocketNotificationService=u,this.isApp=!1,this.isSearchPage=!1,this.placeholder='try "table"',this.placeholders=["Search - it's all free!"],this.isApp=!this.platform.is("desktop")}return e.prototype.ngOnInit=function(){this.isSearchPage=!!this.isSamePage("/search"),this.randomPlaceHolder()},e.prototype.randomPlaceHolder=function(){var e=this.placeholders[Math.floor(Math.random()*this.placeholders.length)];this.placeholder=e},e.prototype.uploadImage=function(e){console.log("image chosen")},e.prototype.goToPost=function(){this.navCtrl.navigateForward("post")},e.prototype.openMainMenu=function(){this.menuCtrl.open("start")},e.prototype.goToIntroduction=function(){this.navCtrl.navigateForward("introduction")},e.prototype.search=function(e){e.target.blur(),this.isSamePage("search")||this.navCtrl.navigateForward("search"),e.target.value&&(this.searchService.refreshSearchResults(),this.searchService.searchPageSearchRequest.searchQuery=e.target.value,this.searchService.search(null,null))},e.prototype.isSamePage=function(e){return this.router.url===e&&(console.log("same page"),!0)},e.prototype.openNotifications=function(){this.auth&&this.auth.user?this.navCtrl.navigateForward("notifications"):this.goToLogin()},e.prototype.goToRegister=function(){this.navCtrl.navigateForward("register")},e.prototype.goToLogin=function(){this.navCtrl.navigateForward("login")},e.prototype.redirectToSearch=function(e){this.removeFocusInput.nativeElement.focus().this.navCtrl.navigateForward("search/true")},e.prototype.takePicture=function(e){return t=this,void 0,n=function(){var e,t,o;return function(e,t){var o,n,r,i,c={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,n=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!((r=(r=c.trys).length>0&&r[r.length-1])||6!==i[0]&&2!==i[0])){c=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){c.label=i[1];break}if(6===i[0]&&c.label<r[1]){c.label=r[1],r=i;break}if(r&&c.label<r[2]){c.label=r[2],c.ops.push(i);break}r[2]&&c.ops.pop(),c.trys.pop();continue}i=t.call(e,c)}catch(a){i=[6,a],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}}(this,(function(n){switch(n.label){case 0:if(!this.auth||!this.auth.user)return this.goToLogin(),[2];if(this.goToPost(),this.platform.is("desktop"))return this.goToPost(),[2];e={quality:50,destinationType:this.camera.DestinationType.DATA_URL,encodingType:this.camera.EncodingType.JPEG,mediaType:this.camera.MediaType.PICTURE,targetWidth:1280,targetHeight:1280,saveToPhotoAlbum:!1},n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.camera.getPicture(e)];case 2:return t=n.sent(),this.nativeStorage.setItem("latestPicture","data:image/jpeg;base64,"+t).then((function(){return console.log("Stored item!")}),(function(e){return console.error("Error storing item",e)})),this.navCtrl.navigateForward("post"),[3,4];case 3:return o=n.sent(),console.log(o),[3,4];case 4:return[2]}}))},new((o=void 0)||(o=Promise))((function(e,r){function i(e){try{a(n.next(e))}catch(t){r(t)}}function c(e){try{a(n.throw(e))}catch(t){r(t)}}function a(t){var n;t.done?e(t.value):(n=t.value,n instanceof o?n:new o((function(e){e(n)}))).then(i,c)}a((n=n.apply(t,[])).next())}));var t,o,n},e.prototype.placeHolderFocus=function(){this.placeholder="try 'table'"},e.prototype.placeHolderBlur=function(){this.placeholder="Search - it's all free!"},e.\u0275fac=function(t){return new(t||e)(l.Yb(i.d),l.Yb(r.a),l.Yb(n.a),l.Yb(c.a),l.Yb(i.eb),l.Yb(a.a),l.Yb(i.bb),l.Yb(u.i),l.Yb(i.db),l.Yb(i.kb),l.Yb(s.b))},e.\u0275cmp=l.Sb({type:e,selectors:[["app-topbar"]],viewQuery:function(e,t){var o;1&e&&l.Oc(h,!0),2&e&&l.Bc(o=l.mc())&&(t.removeFocusInput=o.first)},inputs:{title:"title",displaySearchBar:"displaySearchBar",displayCameraIcon:"displayCameraIcon"},decls:13,vars:9,consts:[[1,"ion-no-padding"],["slot","start","fill","clear",3,"click"],["name","menu",2,"font-size","2em"],["slot","start","color","primary","defaultHref","search",4,"ngIf"],["id","main-search-bar","autofocus","","slot","start",1,"searchbar",3,"searchIcon","ngModel","showCancelButton","clearIcon","placeholder","ngModelChange","search","ionFocus","ionBlur"],["searchInput",""],["type","hidden",2,"display","none"],["removeFocusInput",""],["slot","end","fill","clear",1,"ion-no-padding",3,"click"],[1,"ion-no-padding",3,"src"],["class","new-notification-position",4,"ngIf"],["slot","start","color","primary","defaultHref","search"],[1,"new-notification-position"]],template:function(e,t){1&e&&(l.dc(0,"ion-toolbar",0),l.dc(1,"ion-button",1),l.lc("click",(function(){return t.openMainMenu()})),l.Zb(2,"ion-icon",2),l.cc(),l.Jc(3,f,1,0,"ion-back-button",3),l.dc(4,"ion-searchbar",4,5),l.lc("ngModelChange",(function(e){return t.searchService.searchPageSearchRequest.searchQuery=e}))("search",(function(e){return t.search(e)}))("ionFocus",(function(){return t.placeHolderFocus()}))("ionBlur",(function(){return t.placeHolderBlur()})),l.cc(),l.Zb(6,"input",6,7),l.dc(8,"ion-button",8),l.lc("click",(function(e){return t.takePicture(e)})),l.Zb(9,"ion-icon",9),l.cc(),l.dc(10,"ion-button",8),l.lc("click",(function(){return t.openNotifications()})),l.Zb(11,"ion-icon",9),l.Jc(12,m,2,0,"span",10),l.cc(),l.cc()),2&e&&(l.Mb(3),l.vc("ngIf",!t.isSearchPage),l.Mb(1),l.vc("searchIcon","menu")("ngModel",t.searchService.searchPageSearchRequest.searchQuery)("showCancelButton",!1)("clearIcon","true")("placeholder",t.placeholder),l.Mb(5),l.vc("src","/assets/icon/menu/post-advert.svg"),l.Mb(2),l.vc("src","/assets/icon/menu/notification.svg"),l.Mb(1),l.vc("ngIf",t.webSocketNotificationService.newNotifictions))},directives:[i.X,i.j,i.t,p.l,i.L,i.jb,d.h,d.k,i.g,i.h],styles:[".title[_ngcontent-%COMP%]{color:var(--ion-color-primary);line-height:1em;font-size:.8em}.offline[_ngcontent-%COMP%]{background-color:var(--ion-color-danger);color:var(--ion-color-danger-contrast);text-transform:uppercase;text-align:center;font-size:.8em}.new-notification-position[_ngcontent-%COMP%]{position:absolute;right:1.5em;top:.5em;font-size:.7em}ion-searchbar[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{display:none!important}ion-icon.custom[_ngcontent-%COMP%]{font-size:2em;color:var(--ion-color-primary)!important;-webkit-filter:brightness(0) saturate(100%) invert(31%) sepia(30%) saturate(3312%) hue-rotate(131deg) brightness(99%) contrast(101%);filter:brightness(0) saturate(100%) invert(31%) sepia(30%) saturate(3312%) hue-rotate(131deg) brightness(99%) contrast(101%)}.searchbar-search-icon[_ngcontent-%COMP%]{display:none!important}"]}),e}()}}]);