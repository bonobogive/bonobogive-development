{"version":3,"sources":["./src/app/enums/reportReasonTypeENum.ts","./src/app/pages/report/report.module.ts","./src/app/pages/report/report.page.ts","./src/app/pages/report/report.page.html","./src/app/services/report.service.ts"],"names":[],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA,IAAY,oBAKX;AALD,WAAY,oBAAoB;IAC5B,qEAAW;IACX,iFAAiB;IACjB,qEAAW;IACX,iEAAS;AACb,CAAC,EALW,oBAAoB,KAApB,oBAAoB,QAK/B;;;;;;;;;;;;;ACLD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAyC;AACM;AACmB;AACX;AAEV;AAEF;AAC2B;;;AAEtE,IAAM,MAAM,GAAW;IACrB;QACE,IAAI,EAAE,EAAE;QACR,SAAS,EAAE,uDAAU;KACtB;CACF,CAAC;AAEF;IAAA;KAWgC;mGAAnB,gBAAgB;8JAAhB,gBAAgB,kBAVlB;gBACP,4DAAY;gBACZ,0DAAW;gBACX,kEAAmB;gBACnB,0DAAW;gBACX,4DAAY,CAAC,QAAQ,CAAC,MAAM,CAAC;gBAC7B,8EAAgB;aACjB;2BAzBH;CA4BgC;AAAH;mIAAhB,gBAAgB,mBAFZ,uDAAU,aAPvB,4DAAY;QACZ,0DAAW;QACX,kEAAmB;QACnB,0DAAW,gEAEX,8EAAgB;6FAIP,gBAAgB;cAX5B,sDAAQ;eAAC;gBACR,OAAO,EAAE;oBACP,4DAAY;oBACZ,0DAAW;oBACX,kEAAmB;oBACnB,0DAAW;oBACX,4DAAY,CAAC,QAAQ,CAAC,MAAM,CAAC;oBAC7B,8EAAgB;iBACjB;gBACD,YAAY,EAAE,CAAC,uDAAU,CAAC;aAC3B;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC3BiD;AACD;AACZ;AACyB;AACA;AACJ;AACc;AACY;;;;;;;;;;;ICClF,yEAA2C;;;IAGzC,6EACuC;;;IADX,2LAA8F;;;;IA0CxH,2EACE;IAAA,+EAA8B;IAAA,gEAAK;IAAA,4DAAY;IAC/C,gFAA8F;IAAvE,2VAAmB;IAAwC,4DAAY;IAChG,4DAAW;;;IADc,0DAAmB;IAAnB,mFAAmB;;;;IA9ChD,sEAEE;IAAA,4HACyB;IAGzB,uEAEE;IAAA,2EACE;IAAA,qFACE;IADe,qVAAoB;IACnC,kFACE;IAAA,+EAA8B;IAAA,iEAAM;IAAA,4DAAY;IAClD,4DAAkB;IAElB,2EACE;IAAA,4EAAW;IAAA,yEAAa;IAAA,4DAAY;IACpC,2EAA4D;IAC9D,4DAAW;IAEX,4EACE;IAAA,6EAAW;IAAA,mEAAO;IAAA,4DAAY;IAC9B,2EAA4D;IAC9D,4DAAW;IAGX,4EACE;IAAA,6EAAW;IAAA,iEAAK;IAAA,4DAAY;IAC5B,2EAA4D;IAC9D,4DAAW;IAQb,4DAAkB;IACpB,4DAAW;IAOX,wHACE;IAIF,4EACE;IAAA,gFAA8B;IAAA,2EAAe;IAAA,4DAAY;IACzD,mFAA4J;IAAlI,oVAAqB;IAA8F,4DAAe;IAC9J,4DAAW;IAEX,4EACE;IAAA,iFAAgG;IAApF,gUAA8B;IAAsD,kEAAM;IAAA,4DAAa;IACrH,4DAAW;IAGb,4DAAO;IACT,4DAAM;;;IA1DS,0DAAc;IAAd,iFAAc;IAON,0DAAoB;IAApB,oFAAoB;IAmC7B,2DAAmB;IAAnB,sFAAmB;IAOD,0DAAqB;IAArB,qFAAqB;IAIJ,0DAAmD;IAAnD,qIAAmD;;ADtDtG;IAeE,oBACU,cAA8B,EAC9B,aAA4B,EAC5B,aAA4B,EAC5B,eAAgC,EAChC,iBAAoC,EACpC,aAA4B,EAC7B,IAAiB;QANhB,mBAAc,GAAd,cAAc,CAAgB;QAC9B,kBAAa,GAAb,aAAa,CAAe;QAC5B,kBAAa,GAAb,aAAa,CAAe;QAC5B,oBAAe,GAAf,eAAe,CAAiB;QAChC,sBAAiB,GAAjB,iBAAiB,CAAmB;QACpC,kBAAa,GAAb,aAAa,CAAe;QAC7B,SAAI,GAAJ,IAAI,CAAa;QAX1B,WAAM,GAAyB,gFAAoB,CAAC,OAAO,CAAC;QAC5D,UAAK,GAAW,IAAI,CAAC;QACrB,YAAO,GAAW,IAAI,CAAC;IAWvB,CAAC;IAED,6BAAQ,GAAR;QAAA,iBAYC;QAXC,IAAM,SAAS,GAAG,0DAAa,CAC7B,IAAI,CAAC,cAAc,CAAC,MAAM,EAC1B,IAAI,CAAC,cAAc,CAAC,WAAW,EAC/B,UAAC,MAAM,EAAE,WAAW,IAAK,8BAAM,MAAM,GAAK,WAAW,EAAG,EAA/B,CAA+B,CAC3D,CAAC;QAEF,SAAS,CAAC,SAAS,CAAC,qBAAW;YAC3B,KAAI,CAAC,gBAAgB,GAAG,WAAW,CAAC,EAAE,CAAC;YACvC,KAAI,CAAC,SAAS,CAAC,KAAI,CAAC,gBAAgB,CAAC,CAAC;YACtC,OAAO,CAAC,GAAG,CAAC,SAAS,GAAG,KAAI,CAAC,gBAAgB,GAAG,SAAS,CAAC,CAAC;QAC/D,CAAC,CAAC,CAAC;IACH,CAAC;IAED,8BAAS,GAAT,UAAU,QAAgB;QAA1B,iBAIC;QAHC,IAAI,CAAC,aAAa,CAAC,SAAS,CAAC,IAAI,CAAC,kBAAkB,EAAE,IAAI,CAAC,aAAa,CAAC,CAAC,SAAS,CAAC,aAAG;YACrF,KAAI,CAAC,MAAM,GAAG,GAAG,CAAC;QACpB,CAAC,CAAC,CAAC;IACL,CAAC;IAGK,iCAAY,GAAlB;;;;;4BACkB,qBAAM,IAAI,CAAC,iBAAiB,CAAC,MAAM,CAAC;4BAClD,OAAO,EAAE,gBAAgB;yBAC1B,CAAC;;wBAFI,OAAO,GAAG,SAEd;wBACF,qBAAM,OAAO,CAAC,OAAO,EAAE;;wBAAvB,SAAuB,CAAC;wBACxB,qBAAM,IAAI,CAAC,aAAa,CAAC,YAAY,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,GAAG,EAAE,IAAI,CAAC,MAAM,CAAC,YAAY,EAAE,QAAQ,EAAG,IAAI,CAAC,MAAM,EAAE,IAAI,CAAC,KAAK,EAAE,IAAI,CAAC,OAAO,CAAC;;wBAArI,SAAqI,CAAC;wBACtI,qBAAM,OAAO,CAAC,OAAO,EAAE;;wBAAvB,SAAuB,CAAC;;;;;KACzB;IAEK,uCAAkB,GAAxB;;;;;;4BAEkB,qBAAM,IAAI,CAAC,eAAe,CAAC,MAAM,CAAC;4BAC9C,MAAM,EAAE,SAAS;4BACjB,OAAO,EAAE,8CAA8C;4BACvD,OAAO,EAAE;gCACP;oCACE,IAAI,EAAE,KAAK;oCACX,OAAO,EAAE;;;wDACP,qBAAM,IAAI,CAAC,YAAY,EAAE;;oDAAzB,SAAyB,CAAC;oDAC1B,IAAI,CAAC,aAAa,CAAC,eAAe,CAAC,YAAU,IAAI,CAAC,gBAAkB,CAAC,CAAC;;;;yCAEvE;iCACF;gCACD;oCACE,IAAI,EAAE,QAAQ;oCACd,OAAO,EAAE;oCAET,CAAC;iCACF;6BACF;yBACF,CAAC;;wBAnBE,OAAO,GAAG,SAmBZ;wBACF,qBAAM,OAAO,CAAC,OAAO,EAAE;;wBAAvB,SAAuB,CAAC;;;;;KACzB;wEA1EQ,UAAU;8FAAV,UAAU;YCfvB,6EACE;YAAA,8EACE;YAAA,4EAAW;YAAA,iEAAM;YAAA,4DAAY;YAC/B,4DAAc;YAChB,4DAAa;YAEb,iFAEE;YAAA,sHAA6B;YAC7B,uGAEE;YA4DJ,4DAAc;;YA/DC,0DAAe;YAAf,6EAAe;YACvB,0DAAc;YAAd,4EAAc;;qBDTrB;CA6FC;AA9EsB;6FAAV,UAAU;cALtB,uDAAS;eAAC;gBACT,QAAQ,EAAE,YAAY;gBACtB,WAAW,EAAE,oBAAoB;gBACjC,SAAS,EAAE,CAAC,oBAAoB,CAAC;aAClC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AEd0C;AACuB;;;AAKlE;IAKE,uBACS,SAA0B,EAC1B,SAA0B;QAD1B,cAAS,GAAT,SAAS,CAAiB;QAC1B,cAAS,GAAT,SAAS,CAAiB;IAInC,CAAC;IAGK,oCAAY,GAAlB,UAAmB,MAAc,EAAE,MAAc,EAAE,QAAgB,EAAE,MAA4B,EAAE,KAAa,EAAE,OAAe;;;gBAIhI,sBAAO,IAAI,EAAC;;;KACZ;8EAhBU,aAAa;oGAAb,aAAa,WAAb,aAAa,mBAFZ,MAAM;wBAPpB;CA2BC;AAlByB;6FAAb,aAAa;cAHzB,wDAAU;eAAC;gBACV,UAAU,EAAE,MAAM;aACnB","file":"pages-report-report-module.js","sourcesContent":["export enum reportReasonTypeEnum {\r\n    unknown = 0,\r\n    inappropriate = 1,\r\n    selling = 2,\r\n    other = 3\r\n}","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { ReportPage } from './report.page';\r\nimport { ComponentsModule } from '../../components/components.module';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: ReportPage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    ReactiveFormsModule,\r\n    IonicModule,\r\n    RouterModule.forChild(routes),\r\n    ComponentsModule\r\n  ],\r\n  declarations: [ReportPage]\r\n})\r\nexport class ReportPageModule {}\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { ActivatedRoute } from '@angular/router';\r\nimport { combineLatest } from 'rxjs';\r\nimport { AdvertService } from '../../services/advert.service';\r\nimport { ReportService } from '../../services/report.service';\r\nimport { AuthService } from '../../services/auth.service';\r\nimport { reportReasonTypeEnum } from '../../enums/reportReasonTypeENum';\r\nimport {  AlertController, LoadingController, NavController } from '@ionic/angular';\r\nimport { AdvertEntity } from '../../clients/bonobogive.client';\r\n\r\n@Component({\r\n  selector: 'app-report',\r\n  templateUrl: './report.page.html',\r\n  styleUrls: ['./report.page.scss'],\r\n})\r\nexport class ReportPage implements OnInit {\r\n  //postReportGroup: FormGroup;\r\n  advertPrimaryKey: string;\r\n  advertPartitionKey: string;\r\n  advertSortKey: string;\r\n  advert: AdvertEntity;\r\n  reason: reportReasonTypeEnum = reportReasonTypeEnum.unknown;\r\n  other: string = null;\r\n  details: string = null;\r\n\r\n  constructor(\r\n    private activatedRoute: ActivatedRoute,\r\n    private advertService: AdvertService,\r\n    private reportService: ReportService,\r\n    private alertController: AlertController,\r\n    private loadingController: LoadingController,\r\n    private navController: NavController,\r\n    public auth: AuthService) { \r\n\r\n  }\r\n\r\n  ngOnInit() {\r\n    const urlParams = combineLatest(\r\n      this.activatedRoute.params,\r\n      this.activatedRoute.queryParams,\r\n      (params, queryParams) => ({ ...params, ...queryParams })\r\n  );\r\n\r\n  urlParams.subscribe(routeParams => {\r\n      this.advertPrimaryKey = routeParams.id;\r\n      this.getAdvert(this.advertPrimaryKey);\r\n      console.log(\"Advert \" + this.advertPrimaryKey + \" loaded\");\r\n  });\r\n  }\r\n\r\n  getAdvert(advertId: string){\r\n    this.advertService.getAdvert(this.advertPartitionKey, this.advertSortKey).subscribe(res=>{\r\n      this.advert = res;\r\n    });\r\n  }\r\n\r\n\r\n  async submitReport(){\r\n    const loading = await this.loadingController.create({\r\n      message: 'Please wait...',\r\n    });\r\n    await loading.present();\r\n    await this.reportService.createReport(this.auth.user.uid, this.advert.partitionKey, \"advert\",  this.reason, this.other, this.details);\r\n    await loading.dismiss();\r\n  }\r\n\r\n  async submitConfirmation() {\r\n\r\n      let confirm = await this.alertController.create({\r\n        header: \"Submit?\",\r\n        message: \"Are you sure you want to submit this report?\",\r\n        buttons: [\r\n          {\r\n            text: \"Yes\",\r\n            handler: async () => {\r\n              await this.submitReport();\r\n              this.navController.navigateForward(`advert/${this.advertPrimaryKey}`);\r\n\r\n            }\r\n          },\r\n          {\r\n            text: \"Cancel\",\r\n            handler: () => {\r\n\r\n            }\r\n          }\r\n        ]\r\n      });\r\n      await confirm.present();\r\n    }\r\n  \r\n  \r\n\r\n}\r\n","<ion-header>\r\n  <ion-toolbar>\r\n    <ion-title>report</ion-title>\r\n  </ion-toolbar>\r\n</ion-header>\r\n\r\n<ion-content class=\"ion-padding\">\r\n\r\n  <ion-spinner *ngIf=\"!advert\"></ion-spinner>\r\n  <div *ngIf=\"advert\">\r\n\r\n    <app-message *ngIf=\"advert\" [imageUrl]=\"advert && advert.images && advert.images.length > 0 ? advert.images[0].url : null\"\r\n      [title]=\"advert.title\"></app-message>\r\n\r\n\r\n    <form>\r\n\r\n      <ion-list>\r\n        <ion-radio-group [(ngModel)]=\"reason\" name=\"reason\">\r\n          <ion-list-header>\r\n            <ion-label position=\"stacked\">Reason</ion-label>\r\n          </ion-list-header>\r\n\r\n          <ion-item>\r\n            <ion-label>inappropriate</ion-label>\r\n            <ion-radio slot=\"start\" name=\"reason\" value=\"1\"></ion-radio>\r\n          </ion-item>\r\n\r\n          <ion-item>\r\n            <ion-label>selling</ion-label>\r\n            <ion-radio slot=\"start\" name=\"reason\" value=\"2\"></ion-radio>\r\n          </ion-item>\r\n\r\n\r\n          <ion-item>\r\n            <ion-label>other</ion-label>\r\n            <ion-radio slot=\"start\" name=\"reason\" value=\"3\"></ion-radio>\r\n          </ion-item>\r\n\r\n\r\n          <!-- <ion-select formControlName=\"reason\" name=\"reason\" id=\"reason\">\r\n              <ion-select-option value=\"inappropriate\" checked=\"false\">inappropriate</ion-select-option>\r\n              <ion-select-option value=\"selling\" checked=\"false\">selling</ion-select-option>\r\n              <ion-select-option value=\"other\" checked=\"false\">other</ion-select-option>\r\n            </ion-select> -->\r\n        </ion-radio-group>\r\n      </ion-list>\r\n\r\n\r\n\r\n\r\n\r\n\r\n      <ion-item *ngIf=\"reason == 3\">\r\n        <ion-label position=\"stacked\">other</ion-label>\r\n        <ion-input type=\"text\" [(ngModel)]=\"other\" name=\"other\" maxlength=\"250\" multiline></ion-input>\r\n      </ion-item>\r\n\r\n      <ion-item>\r\n        <ion-label position=\"stacked\">Further details</ion-label>\r\n        <ion-textarea type=\"text\" [(ngModel)]=\"details\" placeholder=\"Please provide further details here...\" name=\"details\" maxlength=\"250\" rows=\"4\"></ion-textarea>\r\n      </ion-item>\r\n\r\n      <ion-item>\r\n        <ion-button (click)=\"submitConfirmation()\" [disabled]=\"reason == 0 || (reason == 3 && !other)\" >Submit</ion-button>\r\n      </ion-item>\r\n\r\n\r\n    </form>\r\n  </div>\r\n\r\n</ion-content>","import { Injectable } from \"@angular/core\";\r\nimport { AlertController, ToastController } from \"@ionic/angular\";\r\nimport { reportReasonTypeEnum } from \"../enums/reportReasonTypeENum\";\r\n\r\n\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class ReportService {\r\n\r\n  constructor(\r\n    public alertCtrl: AlertController,\r\n    public toastCtrl: ToastController\r\n\r\n  ) {\r\n\r\n  }\r\n\r\n\r\n  async createReport(userId: string, itemId: string, itemType: string, reason: reportReasonTypeEnum, other: string, details: string): Promise<string> {\r\n    \r\n\r\n    \r\n   return null;\r\n  }\r\n\r\n}\r\n"],"sourceRoot":"webpack:///"}