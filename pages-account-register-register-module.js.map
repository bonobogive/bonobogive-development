{"version":3,"sources":["./src/app/pages/account/register/register.module.ts","./src/app/pages/account/register/register.page.ts","./src/app/pages/account/register/register.page.html"],"names":[],"mappings":"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","file":"pages-account-register-register-module.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { RegisterPage } from './register.page';\r\nimport { ComponentsModule } from '../../../components/components.module';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: RegisterPage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    ReactiveFormsModule,\r\n    IonicModule,\r\n    RouterModule.forChild(routes),\r\n    ComponentsModule\r\n  ],\r\n  declarations: [RegisterPage]\r\n})\r\nexport class RegisterPageModule {}\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { FormGroup, FormBuilder, Validators } from \"@angular/forms\";\r\nimport { AlertController, LoadingController, NavController, ToastController } from \"@ionic/angular\";\r\nimport { AuthService } from '../../../services/auth.service';\r\n\r\n@Component({\r\n    selector: 'register',\r\n    templateUrl: './register.page.html',\r\n    styleUrls: ['./register.page.scss'],\r\n})\r\nexport class RegisterPage implements OnInit {\r\n\r\n\r\n    singUpFormGroup: FormGroup;\r\n   \r\n    constructor(public alertCtrl: AlertController,\r\n        public loadingCtrl: LoadingController,\r\n        private formBuilder: FormBuilder,\r\n        private navController: NavController,\r\n        private toastCtrl: ToastController,\r\n        private authService: AuthService) {\r\n        this.singUpFormGroup = this.formBuilder.group({\r\n            username: [\"\", Validators.compose([Validators.required])],\r\n            forename: [\"\", Validators.compose([Validators.required])],\r\n            surname: [\"\", Validators.compose([Validators.required])],\r\n            email: [\"\", Validators.compose([Validators.required, Validators.email])],\r\n            password: [\"\", Validators.compose([Validators.required, Validators.minLength(8)])],\r\n            passwordConfirm: [\"\", Validators.compose([Validators.required, Validators.minLength(8)])],\r\n            showPassword: [false]\r\n        }\r\n            , { validator: this.matchingPasswords(\"password\", \"passwordConfirm\") }\r\n        );\r\n    }\r\n\r\n    ngOnInit() {\r\n\r\n    }\r\n\r\n\r\n    async presentToast() {\r\n        let toast = await this.toastCtrl.create({\r\n            message: 'Your account has been created, please verify your email address',\r\n            duration: 3000,\r\n            position: 'top'\r\n        });\r\n        await toast.present();\r\n    }\r\n\r\n    private matchingPasswords(passwordKey: string, confirmPasswordKey: string) {\r\n        return (group: FormGroup): { [key: string]: any } => {\r\n            let password = group.controls[passwordKey];\r\n            let confirmPassword = group.controls[confirmPasswordKey];\r\n\r\n            if (password.value !== confirmPassword.value) {\r\n                return {\r\n                    mismatchedPasswords: true\r\n                };\r\n            }\r\n        }\r\n    }\r\n\r\n    async presentAlert(message: string) {\r\n        const alert = await this.alertCtrl.create({\r\n            header: 'Error',\r\n            subHeader: 'Failed to create account',\r\n            message: message,\r\n            buttons: ['OK']\r\n        });\r\n\r\n        await alert.present();\r\n    }\r\n\r\n    async signUpSubmit() {\r\n        var loader = await this.loadingCtrl.create({\r\n            message: \"Registering...\"\r\n        });\r\n\r\n        try {\r\n            await loader.present();\r\n            await this.authService.register(this.singUpFormGroup.value.username,\r\n                this.singUpFormGroup.value.email,\r\n                this.singUpFormGroup.value.forename,\r\n                this.singUpFormGroup.value.surname,\r\n                this.singUpFormGroup.value.password);\r\n\r\n                // this.signupSubmitted = true\r\n\r\n                this.navController.navigateRoot(\"login?showcode=true\");\r\n\r\n            await loader.dismiss();\r\n        }\r\n        catch (e) {\r\n            await loader.dismiss();\r\n            console.log(e);\r\n        }\r\n    }\r\n}\r\n","<ion-header>\r\n    <app-topbar title=\"Sign up\"></app-topbar>\r\n</ion-header>\r\n\r\n<ion-content class=\"signup\">\r\n\r\n    <form [formGroup]=\"singUpFormGroup\" (ngSubmit)=\"signUpSubmit()\" class=\"ion-padding\">\r\n\r\n        <ion-grid>\r\n            <ion-item>\r\n                <ion-label position=\"stacked\">Email</ion-label>\r\n                <ion-input type=\"email\" formControlName=\"email\"></ion-input>\r\n            </ion-item>\r\n\r\n            <ion-item>\r\n                <ion-label position=\"stacked\">Username</ion-label>\r\n                <ion-input type=\"text\" formControlName=\"username\"></ion-input>\r\n            </ion-item>\r\n\r\n            <ion-item>\r\n                <ion-label position=\"stacked\">Forename</ion-label>\r\n                <ion-input type=\"text\" formControlName=\"forename\"></ion-input>\r\n            </ion-item>\r\n\r\n            <ion-item>\r\n                <ion-label position=\"stacked\">Surname</ion-label>\r\n                <ion-input type=\"text\" formControlName=\"surname\"></ion-input>\r\n            </ion-item>\r\n\r\n            <ion-item>\r\n                <ion-label position=\"stacked\">Password</ion-label>\r\n                <ion-input type=\"text\" type=\"{{singUpFormGroup?.value?.showPassword ? 'text' : 'password'}}\"\r\n                    formControlName=\"password\"></ion-input>\r\n            </ion-item>\r\n\r\n            <ion-item>\r\n                <ion-label position=\"stacked\">Confirm password</ion-label>\r\n                <ion-input type=\"text\" type=\"{{singUpFormGroup?.value?.showPassword ? 'text' : 'password'}}\"\r\n                    formControlName=\"passwordConfirm\"></ion-input>\r\n            </ion-item>\r\n\r\n            <ion-item lines=\"none\">\r\n                <ion-label>Show password</ion-label>\r\n                <ion-checkbox slot=\"start\" formControlName=\"showPassword\">Show password</ion-checkbox>\r\n\r\n            </ion-item>\r\n            <ion-button type=\"submit\" primary block [disabled]=\"!singUpFormGroup.valid\">Submit</ion-button>\r\n        </ion-grid>\r\n    </form>\r\n\r\n\r\n</ion-content>"],"sourceRoot":"webpack:///"}