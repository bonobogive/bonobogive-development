{"version":3,"sources":["./src/app/pages/account/register/register.module.ts","./src/app/pages/account/register/register.page.ts","./src/app/pages/account/register/register.page.html"],"names":[],"mappings":"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","file":"pages-account-register-register-module.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { RegisterPage } from './register.page';\r\nimport { ComponentsModule } from '../../../components/components.module';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: RegisterPage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    ReactiveFormsModule,\r\n    IonicModule,\r\n    RouterModule.forChild(routes),\r\n    ComponentsModule\r\n  ],\r\n  declarations: [RegisterPage]\r\n})\r\nexport class RegisterPageModule {}\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { FormGroup, FormBuilder, Validators } from \"@angular/forms\";\r\nimport { AlertController, LoadingController, NavController, ToastController } from \"@ionic/angular\";\r\nimport { AuthService } from '../../../services/auth.service';\r\n\r\n@Component({\r\n    selector: 'register',\r\n    templateUrl: './register.page.html',\r\n    styleUrls: ['./register.page.scss'],\r\n})\r\nexport class RegisterPage implements OnInit {\r\n\r\n\r\n    singUpFormGroup: FormGroup;\r\n    verifySignUpForm: FormGroup;\r\n\r\n    signupSubmitted: boolean = false;\r\n\r\n    constructor(public alertCtrl: AlertController,\r\n        public loadingCtrl: LoadingController,\r\n        private formBuilder: FormBuilder,\r\n        private navController: NavController,\r\n        private toastCtrl: ToastController,\r\n        private authService: AuthService) {\r\n        this.singUpFormGroup = this.formBuilder.group({\r\n            username: [\"\", Validators.compose([Validators.required])],\r\n            forename: [\"\", Validators.compose([Validators.required])],\r\n            surname: [\"\", Validators.compose([Validators.required])],\r\n            email: [\"\", Validators.compose([Validators.required, Validators.email])],\r\n            password: [\"\", Validators.compose([Validators.required, Validators.minLength(8)])],\r\n            passwordConfirm: [\"\", Validators.compose([Validators.required, Validators.minLength(8)])],\r\n            showPassword: [false]\r\n        }\r\n            , { validator: this.matchingPasswords(\"password\", \"passwordConfirm\") }\r\n        );\r\n\r\n        this.verifySignUpForm = this.formBuilder.group({\r\n            code: [\"\", Validators.compose([Validators.required])],\r\n            email: [\"\", Validators.compose([Validators.required])]\r\n\r\n          \r\n        }\r\n            \r\n        );\r\n    }\r\n\r\n    ngOnInit() {\r\n\r\n    }\r\n\r\n\r\n    async verifySignUpSubmit() {\r\n        var loader = await this.loadingCtrl.create({\r\n            message: \"Verifying...\"\r\n        });\r\n\r\n        try {\r\n            await loader.present();\r\n            await this.authService.confirmSignUp(\r\n                \r\n                this.verifySignUpForm.value.email,\r\n                this.verifySignUpForm.value.code);\r\n\r\n            this.navController.navigateRoot(\"login\");\r\n            await loader.dismiss();\r\n        }\r\n        catch (e) {\r\n            await loader.dismiss();\r\n            console.log(e);\r\n        }\r\n    }\r\n\r\n    async presentToast() {\r\n        let toast = await this.toastCtrl.create({\r\n            message: 'Your account has been created, please verify your email address',\r\n            duration: 3000,\r\n            position: 'top'\r\n        });\r\n        await toast.present();\r\n    }\r\n\r\n    private matchingPasswords(passwordKey: string, confirmPasswordKey: string) {\r\n        return (group: FormGroup): { [key: string]: any } => {\r\n            let password = group.controls[passwordKey];\r\n            let confirmPassword = group.controls[confirmPasswordKey];\r\n\r\n            if (password.value !== confirmPassword.value) {\r\n                return {\r\n                    mismatchedPasswords: true\r\n                };\r\n            }\r\n        }\r\n    }\r\n\r\n    async presentAlert(message: string) {\r\n        const alert = await this.alertCtrl.create({\r\n            header: 'Error',\r\n            subHeader: 'Failed to create account',\r\n            message: message,\r\n            buttons: ['OK']\r\n        });\r\n\r\n        await alert.present();\r\n    }\r\n\r\n    async signUpSubmit() {\r\n        var loader = await this.loadingCtrl.create({\r\n            message: \"Registering...\"\r\n        });\r\n\r\n        try {\r\n            await loader.present();\r\n            await this.authService.register(this.singUpFormGroup.value.username,\r\n                this.singUpFormGroup.value.email,\r\n                this.singUpFormGroup.value.forename,\r\n                this.singUpFormGroup.value.surname,\r\n                this.singUpFormGroup.value.password);\r\n\r\n                // this.signupSubmitted = true\r\n\r\n                this.navController.navigateRoot(\"login\");\r\n\r\n            await loader.dismiss();\r\n        }\r\n        catch (e) {\r\n            await loader.dismiss();\r\n            console.log(e);\r\n        }\r\n    }\r\n}\r\n","<ion-header>\r\n    <app-topbar title=\"Sign up\"></app-topbar>\r\n</ion-header>\r\n\r\n<ion-content class=\"signup\">\r\n\r\n    <form  *ngIf=\"!signupSubmitted\" [formGroup]=\"singUpFormGroup\" (ngSubmit)=\"signUpSubmit()\" class=\"ion-padding\">\r\n\r\n        <ion-grid>\r\n            <ion-item>\r\n                <ion-label position=\"stacked\">Email</ion-label>\r\n                <ion-input type=\"email\" formControlName=\"email\"></ion-input>\r\n            </ion-item>\r\n\r\n            <ion-item>\r\n                <ion-label position=\"stacked\">Username</ion-label>\r\n                <ion-input type=\"text\" formControlName=\"username\"></ion-input>\r\n            </ion-item>\r\n\r\n            <ion-item>\r\n                <ion-label position=\"stacked\">Forename</ion-label>\r\n                <ion-input type=\"text\" formControlName=\"forename\"></ion-input>\r\n            </ion-item>\r\n\r\n            <ion-item>\r\n                <ion-label position=\"stacked\">Surname</ion-label>\r\n                <ion-input type=\"text\" formControlName=\"surname\"></ion-input>\r\n            </ion-item>\r\n\r\n            <ion-item>\r\n                <ion-label position=\"stacked\">Password</ion-label>\r\n                <ion-input type=\"text\" type=\"{{singUpFormGroup?.value?.showPassword ? 'text' : 'password'}}\"\r\n                    formControlName=\"password\"></ion-input>\r\n            </ion-item>\r\n\r\n            <ion-item>\r\n                <ion-label position=\"stacked\">Confirm password</ion-label>\r\n                <ion-input type=\"text\" type=\"{{singUpFormGroup?.value?.showPassword ? 'text' : 'password'}}\"\r\n                    formControlName=\"passwordConfirm\"></ion-input>\r\n            </ion-item>\r\n\r\n            <ion-item lines=\"none\">\r\n                <ion-label>Show password</ion-label>\r\n                <ion-checkbox slot=\"start\" formControlName=\"showPassword\">Show password</ion-checkbox>\r\n\r\n            </ion-item>\r\n            <ion-button type=\"submit\" primary block [disabled]=\"!singUpFormGroup.valid\">Submit</ion-button>\r\n        </ion-grid>\r\n    </form>\r\n\r\n    <form *ngIf=\"signupSubmitted\" [formGroup]=\"verifySignUpForm\" (ngSubmit)=\"verifySignUpSubmit()\" class=\"ion-padding\">\r\n\r\n        <ion-grid>\r\n            <ion-item>\r\n                <ion-label position=\"stacked\">Verification code</ion-label>\r\n                <ion-input type=\"text\" formControlName=\"code\"></ion-input>\r\n            </ion-item>\r\n\r\n            <ion-item>\r\n                <ion-label position=\"stacked\">Email or username</ion-label>\r\n                <ion-input type=\"text\" formControlName=\"email\"></ion-input>\r\n            </ion-item>\r\n\r\n            <ion-button type=\"submit\" primary block [disabled]=\"!verifySignUpForm.valid\">Submit</ion-button>\r\n\r\n        </ion-grid>\r\n\r\n    </form>\r\n\r\n    <ion-grid>\r\n        <ion-item *ngIf=\"!signupSubmitted\">\r\n            <ion-button (click)=\"signupSubmitted = true\">I have a code ready</ion-button>\r\n        </ion-item>\r\n\r\n        <ion-item *ngIf=\"signupSubmitted\">\r\n            <ion-button (click)=\"signupSubmitted = false\">Try again</ion-button>\r\n        </ion-item>\r\n\r\n    </ion-grid>\r\n\r\n\r\n\r\n</ion-content>"],"sourceRoot":"webpack:///"}